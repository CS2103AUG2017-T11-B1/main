<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.3">
<title>Directory of Contacts (DoC) - Developer Guide</title>
<link rel="stylesheet" href="stylesheets/gh-pages.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">
<link rel="stylesheet" href="stylesheets/coderay-asciidoctor.css">
</head>
<body class="article">
<div id="header">
<h1>Directory of Contacts (DoC) - Developer Guide</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>By: <code>CS2103AUG2017-T11-B1</code>      Since: <code>Sep 2017</code><br>
Adapted from AddressBook-Level4, by: <code>Team SE-EDU</code>      Since: <code>Jun 2016</code>      Licence: <code>MIT</code></p>
</div>
<div id="toc" class="toc">
<div id="toctitle" class="title"></div>
<ul class="sectlevel1">
<li><a href="#introduction">1. Introduction</a></li>
<li><a href="#setting-up">2. Setting up</a>
<ul class="sectlevel2">
<li><a href="#prerequisites">2.1. Prerequisites</a></li>
<li><a href="#setting-up-the-project-in-your-computer">2.2. Setting up the project in your computer</a></li>
<li><a href="#verifying-the-setup">2.3. Verifying the setup</a></li>
<li><a href="#configurations-to-do-before-writing-code">2.4. Configurations to do before writing code</a>
<ul class="sectlevel3">
<li><a href="#configuring-the-coding-style">2.4.1. Configuring the coding style</a></li>
<li><a href="#updating-documentation-to-match-your-fork">2.4.2. Updating documentation to match your fork</a></li>
<li><a href="#setting-up-ci">2.4.3. Setting up CI</a></li>
<li><a href="#getting-started-with-coding">2.4.4. Getting started with coding</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#design">3. Design</a>
<ul class="sectlevel2">
<li><a href="#architecture">3.1. Architecture</a></li>
<li><a href="#ui-component">3.2. UI component</a></li>
<li><a href="#logic-component">3.3. Logic component</a></li>
<li><a href="#model-component">3.4. Model component</a></li>
<li><a href="#storage-component">3.5. Storage component</a></li>
<li><a href="#common-classes">3.6. Common classes</a></li>
</ul>
</li>
<li><a href="#implementation">4. Implementation</a>
<ul class="sectlevel2">
<li><a href="#undo-redo-mechanism">4.1. Undo/Redo mechanism</a>
<ul class="sectlevel3">
<li><a href="#overview">4.1.1. Overview</a></li>
<li><a href="#design-considerations">4.1.2. Design Considerations</a></li>
<li><a href="#event-methods">4.1.3. Event methods</a></li>
<li><a href="#exceptions">4.1.4. Exceptions</a></li>
<li><a href="#event-card">4.1.5. Event card</a></li>
<li><a href="#design-considerations-2">4.1.6. Design Considerations</a></li>
</ul>
</li>
<li><a href="#oauth2-fulfilment-mechanism">4.2. OAuth2 fulfilment mechanism</a>
<ul class="sectlevel3">
<li><a href="#overview-2">4.2.1. Overview</a></li>
<li><a href="#current-usages">4.2.2. Current usages</a></li>
<li><a href="#execution-flow">4.2.3. Execution flow</a></li>
<li><a href="#design-considerations-3">4.2.4. Design Considerations</a></li>
</ul>
</li>
<li><a href="#email">4.3. Email</a>
<ul class="sectlevel3">
<li><a href="#overview-3">4.3.1. Overview</a></li>
<li><a href="#design-considerations-4">4.3.2. Design Considerations</a></li>
</ul>
</li>
<li><a href="#map">4.4. Map</a>
<ul class="sectlevel3">
<li><a href="#overview-4">4.4.1. Overview</a></li>
<li><a href="#design-considerations-5">4.4.2. Design Considerations</a></li>
</ul>
</li>
<li><a href="#removetag">4.5. RemoveTag</a>
<ul class="sectlevel3">
<li><a href="#overview-5">4.5.1. Overview</a></li>
<li><a href="#design-considerations-6">4.5.2. Design Considerations</a></li>
</ul>
</li>
<li><a href="#find">4.6. Find</a>
<ul class="sectlevel3">
<li><a href="#overview-6">4.6.1. Overview</a></li>
<li><a href="#design-considerations-7">4.6.2. Design Considerations</a></li>
</ul>
</li>
<li><a href="#updateprofilepic-deleteprofilepic-mechanism">4.7. UpdateProfilePic/DeleteProfilePic mechanism</a>
<ul class="sectlevel3">
<li><a href="#overview-7">4.7.1. Overview</a></li>
<li><a href="#design-considerations-8">4.7.2. Design Considerations</a></li>
</ul>
</li>
<li><a href="#viewcount-tracking">4.8. ViewCount Tracking</a>
<ul class="sectlevel3">
<li><a href="#overview-8">4.8.1. Overview</a></li>
<li><a href="#design-considerations-9">4.8.2. Design Considerations</a></li>
</ul>
</li>
<li><a href="#unknown-input-parsing">4.9. Unknown input parsing</a>
<ul class="sectlevel3">
<li><a href="#overview-9">4.9.1. Overview</a></li>
<li><a href="#execution-flow-2">4.9.2. Execution flow</a></li>
<li><a href="#design-considerations-10">4.9.3. Design considerations</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#logging">5. Logging</a>
<ul class="sectlevel2">
<li><a href="#overview-10">5.1. Overview</a></li>
<li><a href="#configuration">5.2. Configuration</a></li>
</ul>
</li>
<li><a href="#documentation">6. Documentation</a>
<ul class="sectlevel2">
<li><a href="#editing-documentation">6.1. Editing Documentation</a></li>
<li><a href="#publishing-documentation">6.2. Publishing Documentation</a></li>
<li><a href="#converting-documentation-to-pdf-format">6.3. Converting Documentation to PDF format</a></li>
</ul>
</li>
<li><a href="#testing">7. Testing</a>
<ul class="sectlevel2">
<li><a href="#running-tests">7.1. Running Tests</a></li>
<li><a href="#types-of-tests">7.2. Types of tests</a></li>
<li><a href="#troubleshooting-testing">7.3. Troubleshooting Testing</a></li>
</ul>
</li>
<li><a href="#dev-ops">8. Dev Ops</a>
<ul class="sectlevel2">
<li><a href="#build-automation">8.1. Build Automation</a></li>
<li><a href="#continuous-integration">8.2. Continuous Integration</a></li>
<li><a href="#making-a-release">8.3. Making a Release</a></li>
<li><a href="#managing-dependencies">8.4. Managing Dependencies</a></li>
</ul>
</li>
<li><a href="#suggested-programming-tasks-to-get-started">Appendix A: Suggested Programming Tasks to Get Started</a>
<ul class="sectlevel2">
<li><a href="#improving-each-component">A.1. Improving each component</a></li>
<li><a href="#creating-a-new-command-code-remark-code">A.2. Creating a new command: <code>remark</code></a>
<ul class="sectlevel3">
<li><a href="#description">A.2.1. Description</a></li>
<li><a href="#step-by-step-instructions">A.2.2. Step-by-step Instructions</a></li>
<li><a href="#full-solution">A.2.3. Full Solution</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#user-stories">Appendix B: User Stories</a></li>
<li><a href="#use-cases">Appendix C: Use Cases</a>
<ul class="sectlevel2">
<li><a href="#use-case-delete-person">C.1. Use case: Delete person</a></li>
<li><a href="#use-case-undo-command">C.2. Use case: Undo command</a></li>
<li><a href="#use-case-swap-persons">C.3. Use case: Swap Persons</a></li>
<li><a href="#use-case-sort-command">C.4. Use case: Sort command</a></li>
<li><a href="#use-case-delete-multiple-persons">C.5. Use case: Delete multiple persons</a></li>
<li><a href="#use-case-import-existing-contacts-from-google">C.6. Use case: Import existing contacts from google</a></li>
<li><a href="#use-case-add-person">C.7. Use case: Add person</a></li>
<li><a href="#use-case-favourite-person">C.8. Use case: Favourite person</a></li>
</ul>
</li>
<li><a href="#non-functional-requirements">Appendix D: Non Functional Requirements</a></li>
<li><a href="#glossary">Appendix E: Glossary</a></li>
<li><a href="#product-survey">Appendix F: Product Survey</a></li>
</ul>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="introduction"><a class="link" href="#introduction">1. Introduction</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Directory of Contacts (DoC) allows you to manage your contacts and events all within a single app. This guide will help you get to know the more important functions of the app and how they were implemented. From this, you will be better equipped to navigate around the codebase and further enhance the app as required.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="setting-up"><a class="link" href="#setting-up">2. Setting up</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="prerequisites"><a class="link" href="#prerequisites">2.1. Prerequisites</a></h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>JDK <code>1.8.0_60</code></strong> or later</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Having any Java 8 version is not enough.<br>
This app will not work with earlier versions of Java 8.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><strong>IntelliJ</strong> IDE</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
IntelliJ by default has Gradle and JavaFx plugins installed.<br>
Do not disable them. If you have disabled them, go to <code>File</code> &gt; <code>Settings</code> &gt; <code>Plugins</code> to re-enable them.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="setting-up-the-project-in-your-computer"><a class="link" href="#setting-up-the-project-in-your-computer">2.2. Setting up the project in your computer</a></h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Fork this repo, and clone the fork to your computer.</p>
</li>
<li>
<p>Open IntelliJ (if you are not in the welcome screen, click <code>File</code> &gt; <code>Close Project</code> to close the existing project dialog first).</p>
</li>
<li>
<p>Set up the correct JDK version for Gradle by:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Clicking <code>Configure</code> &gt; <code>Project Defaults</code> &gt; <code>Project Structure</code>.</p>
</li>
<li>
<p>Clicking <code>New&#8230;&#8203;</code> and find the directory of the JDK.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Click <code>Import Project</code>.</p>
</li>
<li>
<p>Locate the <code>build.gradle</code> file and select it. Click <code>OK</code>.</p>
</li>
<li>
<p>Click <code>Open as Project</code>.</p>
</li>
<li>
<p>Click <code>OK</code> to accept the default settings.</p>
</li>
<li>
<p>Open a console and run the command <code>gradlew processResources</code> (Mac/Linux: <code>./gradlew processResources</code>). It should finish with the <code>BUILD SUCCESSFUL</code> message.<br>
This will generate all resources required by the application and tests.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="verifying-the-setup"><a class="link" href="#verifying-the-setup">2.3. Verifying the setup</a></h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Run the <code>seedu.address.MainApp</code> and try a few commands.</p>
</li>
<li>
<p><a href="#testing">Run the tests</a> to ensure they all pass.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="configurations-to-do-before-writing-code"><a class="link" href="#configurations-to-do-before-writing-code">2.4. Configurations to do before writing code</a></h3>
<div class="sect3">
<h4 id="configuring-the-coding-style"><a class="link" href="#configuring-the-coding-style">2.4.1. Configuring the coding style</a></h4>
<div class="paragraph">
<p>This project follows <a href="https://github.com/oss-generic/process/blob/master/docs/CodingStandards.md">oss-generic coding standards</a>. IntelliJ&#8217;s default style is mostly compliant with ours but it uses a different import order from ours. To rectify:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to <code>File</code> &gt; <code>Settings&#8230;&#8203;</code> (Windows/Linux), or <code>IntelliJ IDEA</code> &gt; <code>Preferences&#8230;&#8203;</code> (macOS).</p>
</li>
<li>
<p>Select <code>Editor</code> &gt; <code>Code Style</code> &gt; <code>Java</code>.</p>
</li>
<li>
<p>Click on the <code>Imports</code> tab to set the order as such:</p>
<div class="ulist">
<ul>
<li>
<p>For <code>Class count to use import with '*'</code> and <code>Names count to use static import with '*'</code>: Set to <code>999</code> to prevent IntelliJ from contracting the import statements.</p>
</li>
<li>
<p>For <code>Import Layout</code>: The order is <code>import static all other imports</code>, <code>import java.*</code>, <code>import javax.*</code>, <code>import org.*</code>, <code>import com.*</code>, <code>import all other imports</code>. Add a <code>&lt;blank line&gt;</code> between each <code>import</code>.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Optionally, you can follow the <a href="UsingCheckstyle.html">UsingCheckstyle.adoc</a> document to configure Intellij to check style-compliance as you write code.</p>
</div>
</div>
<div class="sect3">
<h4 id="updating-documentation-to-match-your-fork"><a class="link" href="#updating-documentation-to-match-your-fork">2.4.2. Updating documentation to match your fork</a></h4>
<div class="paragraph">
<p>After forking the repo, links in the documentation will still point to the <code>se-edu/addressbook-level4</code> repo. If you plan to develop this as a separate product (i.e. instead of contributing to the <code>se-edu/addressbook-level4</code>) , you should replace the URL in the variable <code>repoURL</code> in <code>DeveloperGuide.adoc</code> and <code>UserGuide.adoc</code> with the URL of your fork.</p>
</div>
</div>
<div class="sect3">
<h4 id="setting-up-ci"><a class="link" href="#setting-up-ci">2.4.3. Setting up CI</a></h4>
<div class="paragraph">
<p>Set up Travis to perform Continuous Integration (CI) for your fork. See <a href="UsingTravis.html">UsingTravis.adoc</a> to learn how to set it up.</p>
</div>
<div class="paragraph">
<p>Optionally, you can set up AppVeyor as a second CI (see <a href="UsingAppVeyor.html">UsingAppVeyor.adoc</a>).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Having both Travis and AppVeyor ensures your App works on both Unix-based platforms and Windows-based platforms (Travis is Unix-based and AppVeyor is Windows-based).
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect3">
<h4 id="getting-started-with-coding"><a class="link" href="#getting-started-with-coding">2.4.4. Getting started with coding</a></h4>
<div class="paragraph">
<p>When you are ready to start coding,</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Get some sense of the overall design by reading the <a href="#architecture">Architecture</a> section.</p>
</li>
<li>
<p>Take a look at the section <a href="#suggested-programming-tasks-to-get-started">Suggested Programming Tasks to Get Started</a>.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="design"><a class="link" href="#design">3. Design</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="architecture"><a class="link" href="#architecture">3.1. Architecture</a></h3>
<div class="imageblock">
<div class="content">
<img src="images/Architecture.png" alt="Architecture" width="600">
</div>
</div>
<div class="paragraph">
<p><em>Figure 3.1.1: Architecture Diagram</em></p>
</div>
<div class="paragraph">
<p>The <strong><em>Architecture Diagram</em></strong> given above explains the high-level design of the App. Given below is a quick overview of each component.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The <code>.pptx</code> files used to create diagrams in this document can be found in the <a href="https://github.com/se-edu/addressbook-level4/tree/master/docs/diagrams/">diagrams</a> folder. To update a diagram, modify the diagram in the pptx file, select the objects of the diagram, and choose <code>Save as picture</code>.
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p><code>Main</code> has only one class called <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/MainApp.java"><code>MainApp</code></a>. It is responsible for the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>At app launch: Initializes the components in the correct sequence, and connects them up with each other.</p>
</li>
<li>
<p>At change in selected contact: Increases the <code>viewCount</code> of the selected contact by one and updates the <code>Model</code>.</p>
</li>
<li>
<p>At shut down: Shuts down the components and invokes cleanup method where necessary.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#common-classes"><strong><code>Commons</code></strong></a> represents a collection of classes used by multiple other components. Two of those classes that play important roles at the architecture level are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>EventsCenter</code> : This class (written using <a href="https://github.com/google/guava/wiki/EventBusExplained">Google&#8217;s Event Bus library</a>) is used by components to communicate with other components using events (i.e. a form of <em>Event Driven</em> design).</p>
</li>
<li>
<p><code>LogsCenter</code> : This class is used by many classes to write log messages to the App&#8217;s log file.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The rest of the App consists of the following four components:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#ui-component"><strong><code>UI</code></strong></a> : Displays the UI of the App.</p>
</li>
<li>
<p><a href="#logic-component"><strong><code>Logic</code></strong></a> : Executes the commands.</p>
</li>
<li>
<p><a href="#model-component"><strong><code>Model</code></strong></a> : Holds the data of the App in-memory.</p>
</li>
<li>
<p><a href="#storage-component"><strong><code>Storage</code></strong></a> : Reads data from, and writes data to, the hard disk.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each of the four components does the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Defines its <em>API</em> in an <code>interface</code> with the same name as the Component.</p>
</li>
<li>
<p>Exposes its functionality using a <code>{Component Name}Manager</code> class.</p>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>For example, the <code>Logic</code> component (see the class diagram given below) defines its API in the <code>Logic.java</code> interface and exposes its functionality using the <code>LogicManager.java</code> class.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/LogicClassDiagram.png" alt="LogicClassDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 3.1.2: Class Diagram of the Logic Component</em></p>
</div>
<h4 id="events-driven-nature-of-the-design" class="discrete">Events-Driven nature of the design</h4>
<div class="paragraph">
<p>The <em>Sequence Diagram</em> below shows how the components interact for the scenario where the user issues the command <code>delete 1</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/SDforDeletePerson.png" alt="SDforDeletePerson" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 3.1.3a: Component interactions for <code>delete 1</code> command (part 1)</em></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note how the <code>Model</code> simply raises a <code>AddressBookChangedEvent</code> when the Address Book data are changed, instead of asking the <code>Storage</code> to save the updates to the hard disk.
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>The diagram below shows how the <code>EventsCenter</code> reacts to that event, which eventually results in the updates being saved to the hard disk and the status bar of the UI being updated to reflect the 'Last Updated' time.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/SDforDeletePersonEventHandling.png" alt="SDforDeletePersonEventHandling" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 3.1.3b: Component interactions for <code>delete 1</code> command (part 2)</em></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note how the event is propagated through the <code>EventsCenter</code> to the <code>Storage</code> and <code>UI</code> without <code>Model</code> having to be coupled to either of them. This is an example of how this Event Driven approach helps us reduce direct coupling between components.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The sections below give more details of each component.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="ui-component"><a class="link" href="#ui-component">3.2. UI component</a></h3>
<div class="imageblock">
<div class="content">
<img src="images/UiClassDiagram.PNG" alt="UiClassDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 3.2.1: Structure of the UI Component</em></p>
</div>
<div class="paragraph">
<p><strong>API</strong> : <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/ui/Ui.java"><code>Ui.java</code></a></p>
</div>
<div class="paragraph">
<p>As shown from the diagram above, the UI consists of a <code>MainWindow</code> that is made up of parts e.g.<code>CommandBox</code>, <code>ResultDisplay</code>, <code>PersonListPanel</code>, <code>EventListPanel</code>, <code>StatusBarFooter</code>, <code>BrowserPanel</code> etc. All these, including the <code>MainWindow</code>, inherit from the abstract <code>UiPart</code> class.</p>
</div>
<div class="paragraph">
<p>The <code>UI</code> component uses JavaFx UI framework. The layout of these UI parts are defined in matching <code>.fxml</code> files that are in the <code>src/main/resources/view</code> folder. For example, the layout of the <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/ui/MainWindow.java"><code>MainWindow</code></a> is specified in <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/resources/view/MainWindow.fxml"><code>MainWindow.fxml</code></a>.</p>
</div>
<div class="paragraph">
<p>The <code>UI</code> component:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Executes user commands using the <code>Logic</code> component.</p>
</li>
<li>
<p>Binds itself to some data in the <code>Model</code> so that the UI can auto-update when data in the <code>Model</code> change.</p>
</li>
<li>
<p>Responds to events raised from various parts of the App and updates the UI accordingly.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="logic-component"><a class="link" href="#logic-component">3.3. Logic component</a></h3>
<div class="imageblock">
<div class="content">
<img src="images/LogicClassDiagram.png" alt="LogicClassDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 3.3.1: Structure of the Logic Component</em></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/LogicCommandClassDiagram.png" alt="LogicCommandClassDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 3.3.2: Structure of Commands in the Logic Component. This diagram shows finer details concerning <code>XYZCommand</code> and <code>Command</code> in Figure 3.3.1</em></p>
</div>
<div class="paragraph">
<p>The above two diagrams show the structure of the <code>Logic</code> component and the structure of the commands in the <code>Logic</code> component.</p>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p><strong>API</strong> :
<a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/logic/Logic.java"><code>Logic.java</code></a></p>
</div>
<div class="paragraph">
<p>When the user inputs a command, the <code>Logic</code> component takes these steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>Logic</code> uses the <code>AddressBookParser</code> class to parse the user command.</p>
</li>
<li>
<p>This results in a <code>Command</code> object which is executed by the <code>LogicManager</code>.</p>
</li>
<li>
<p>The command execution can affect the <code>Model</code> (e.g. adding a <code>Person</code>) and/or raise events.</p>
</li>
<li>
<p>The result of the command execution is encapsulated as a <code>CommandResult</code> object which is passed back to the <code>Ui</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Given below is the Sequence Diagram for interactions within the <code>Logic</code> component for the <code>execute("delete 1")</code> API call.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/DeletePersonSdForLogic.png" alt="DeletePersonSdForLogic" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 3.3.3: Interactions Inside the Logic Component for the <code>delete 1</code> Command</em></p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="model-component"><a class="link" href="#model-component">3.4. Model component</a></h3>
<div class="imageblock">
<div class="content">
<img src="images/ModelClassDiagram.PNG" alt="ModelClassDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 3.4.1: Structure of the Model Component</em></p>
</div>
<div class="paragraph">
<p><strong>API</strong> : <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/model/Model.java"><code>Model.java</code></a></p>
</div>
<div class="paragraph">
<p>As shown in the diagram above, the <code>Model</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>stores a <code>UserPref</code> object that represents the user&#8217;s preferences.</p>
</li>
<li>
<p>stores the Address Book data.</p>
</li>
<li>
<p>exposes an unmodifiable <code>ObservableList&lt;ReadOnlyPerson&gt;</code> and <code>ObservableList&lt;ReadOnlyEvent&gt;</code> that can be 'observed' e.g. the UI can be bound to this list so that the UI automatically updates when the data in the list change.</p>
</li>
<li>
<p>does not depend on any of the other three components.</p>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="storage-component"><a class="link" href="#storage-component">3.5. Storage component</a></h3>
<div class="imageblock">
<div class="content">
<img src="images/StorageClassDiagram.PNG" alt="StorageClassDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 3.5.1: Structure of the Storage Component</em></p>
</div>
<div class="paragraph">
<p><strong>API</strong> : <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/storage/Storage.java"><code>Storage.java</code></a></p>
</div>
<div class="paragraph">
<p>As shown in the diagram above, the <code>Storage</code> component:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>can save <code>UserPref</code> objects in json format and read it back.</p>
</li>
<li>
<p>can save the Address Book data in xml format and read it back.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="common-classes"><a class="link" href="#common-classes">3.6. Common classes</a></h3>
<div class="paragraph">
<p>Classes used by multiple components are in the <code>seedu.addressbook.commons</code> package.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="implementation"><a class="link" href="#implementation">4. Implementation</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes some noteworthy details on how certain features are implemented.</p>
</div>
<div class="sect2">
<h3 id="undo-redo-mechanism"><a class="link" href="#undo-redo-mechanism">4.1. Undo/Redo mechanism</a></h3>
<div class="sect3">
<h4 id="overview"><a class="link" href="#overview">4.1.1. Overview</a></h4>
<div class="paragraph">
<p>The undo/redo mechanism is facilitated by an <code>UndoRedoStack</code>, which resides inside <code>LogicManager</code>. It supports undoing and redoing of commands that modifies the state of the address book (e.g. <code>add</code>, <code>edit</code>). Such commands will inherit from <code>UndoableCommand</code>.</p>
</div>
<div class="paragraph">
<p><code>UndoRedoStack</code> only deals with <code>UndoableCommands</code>. Commands that cannot be undone will inherit from <code>Command</code> instead. The following diagram shows the inheritance diagram for commands:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/LogicCommandClassDiagram.png" alt="LogicCommandClassDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 4.1.1: Inheritance Diagram for Commands</em></p>
</div>
<div class="paragraph">
<p>As you can see from the diagram, <code>UndoableCommand</code> adds an extra layer between the abstract <code>Command</code> class and concrete commands that can be undone, such as the <code>DeleteCommand</code>. Note that extra tasks need to be done when executing a command in an <em>undoable</em> way, such as saving the state of the address book before execution. <code>UndoableCommand</code> contains the high-level algorithm for those extra tasks while the child classes implements the details of how to execute the specific command. Note that this technique of putting the high-level algorithm in the parent class and lower-level steps of the algorithm in child classes is also known as the <a href="https://www.tutorialspoint.com/design_pattern/template_pattern.htm">template pattern</a>.</p>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>Commands that are not undoable are implemented this way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">ListCommand</span> <span class="directive">extends</span> Command {
    <span class="annotation">@Override</span>
    <span class="directive">public</span> CommandResult execute() {
        <span class="comment">// ... list logic ...</span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>With the extra layer, the commands that are undoable are implemented this way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="directive">abstract</span> <span class="type">class</span> <span class="class">UndoableCommand</span> <span class="directive">extends</span> Command {
    <span class="annotation">@Override</span>
    <span class="directive">public</span> CommandResult execute() {
        <span class="comment">// ... undo logic ...</span>

        executeUndoableCommand();
    }
}

<span class="directive">public</span> <span class="type">class</span> <span class="class">DeleteCommand</span> <span class="directive">extends</span> UndoableCommand {
    <span class="annotation">@Override</span>
    <span class="directive">public</span> CommandResult executeUndoableCommand() {
        <span class="comment">// ... delete logic ...</span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Suppose that the user has just launched the application. The <code>UndoRedoStack</code> will be empty at the beginning.</p>
</div>
<div class="paragraph">
<p>The user executes a new <code>UndoableCommand</code>, <code>delete 5</code>, to delete the 5th contact in the address book. The current state of the address book is saved before the <code>delete 5</code> command executes. The <code>delete 5</code> command will then be pushed onto the <code>undoStack</code> (the current state is saved together with the command) (See Figure 4.1.2a).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/UndoRedoStartingStackDiagram.png" alt="UndoRedoStartingStackDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 4.1.2a: Mechanism of UndoRedo Stack (Part 1)</em></p>
</div>
<div class="paragraph">
<p>As the user continues to use the program, more commands are added into the <code>undoStack</code>. For example, the user may execute <code>add n/David &#8230;&#8203;</code> to add a new contact, as shown in the diagram below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/UndoRedoNewCommand1StackDiagram.png" alt="UndoRedoNewCommand1StackDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 4.1.2b: Mechanism of UndoRedo Stack (Part 2)</em></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If a command fails its execution, it will not be pushed to the <code>UndoRedoStack</code> at all.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The user now decides that adding the contact was a mistake, and decides to undo that action using <code>undo</code>.</p>
</div>
<div class="paragraph">
<p>We will pop the most recent command out of the <code>undoStack</code> and push it back to the <code>redoStack</code>. We will restore the address book to the state before the <code>add</code> command executed, as can be seen in the diagram below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/UndoRedoExecuteUndoStackDiagram.png" alt="UndoRedoExecuteUndoStackDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 4.1.2c: Mechanism of UndoRedo Stack (Part 3)</em></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the <code>undoStack</code> is empty, then there are no other commands left to be undone, and an <code>Exception</code> will be thrown when popping the <code>undoStack</code>.
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>The following sequence diagram shows how the undo operation works:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/UndoRedoSequenceDiagram.png" alt="UndoRedoSequenceDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 4.1.3: Sequence Diagram for UndoRedo Mechanism</em></p>
</div>
<div class="paragraph">
<p>The redo does the exact opposite (pops from <code>redoStack</code>, push to <code>undoStack</code>, and restores the address book to the state after the command is executed).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the <code>redoStack</code> is empty, then there are no other commands left to be redone, and an <code>Exception</code> will be thrown when popping the <code>redoStack</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The user now decides to execute a new command, <code>clear</code>. As before, <code>clear</code> will be pushed into the <code>undoStack</code>. This time the <code>redoStack</code> is no longer empty. It will be purged as it no longer make sense to redo the <code>add n/David</code> command (this is the behavior that most modern desktop applications follow) (See Figure 4.1.4).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/UndoRedoNewCommand2StackDiagram.png" alt="UndoRedoNewCommand2StackDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 4.1.4: UndoRedo Stack After Clear Command</em></p>
</div>
<div class="paragraph">
<p>Commands that are not undoable are not added into the <code>undoStack</code>. For example, <code>list</code>, which inherits from <code>Command</code> rather than <code>UndoableCommand</code>, will not be added after execution as shown in the following diagram:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/UndoRedoNewCommand3StackDiagram.png" alt="UndoRedoNewCommand3StackDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 4.1.5: UndoRedo Stack After List Command</em></p>
</div>
<div class="paragraph">
<p>The following activity diagram summarize what happens inside the <code>UndoRedoStack</code> when a user executes a new command:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/UndoRedoActivityDiagram.png" alt="UndoRedoActivityDiagram" width="200">
</div>
</div>
<div class="paragraph">
<p><em>Figure 4.1.6: UndoRedo Activity Diagram</em></p>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations"><a class="link" href="#design-considerations">4.1.2. Design Considerations</a></h4>
<div class="paragraph">
<p><strong>Aspect:</strong> Implementation of <code>UndoableCommand</code><br></p>
</div>
<div class="paragraph">
<p><strong>Chosen Implementation:</strong><br>
Add a new abstract method <code>executeUndoableCommand().</code><br>
<strong>Pros:</strong><br>
We will not lose any undone/redone functionality as it is now part of the default behaviour. Classes that deal with <code>Command</code> do not have to know that <code>executeUndoableCommand()</code> exist.<br>
<strong>Cons:</strong><br>
Hard for new developers to understand the template pattern.<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative:</strong><br>
Just override <code>execute().</code><br>
<strong>Pros:</strong><br>
Does not involve the template pattern, easier for new developers to understand.<br>
<strong>Cons:</strong><br>
Classes that inherit from <code>UndoableCommand</code> must remember to call <code>super.execute()</code>, or lose the ability to undo/redo.</p>
</div>
<hr>
<div class="paragraph">
<p><strong>Aspect:</strong> How undo &amp; redo executes<br></p>
</div>
<div class="paragraph">
<p><strong>Chosen Implementation:</strong><br>
Saves the entire address book.<br>
<strong>Pros:</strong><br>
Easy to implement.<br>
<strong>Cons:</strong><br>
May have performance issues in terms of memory usage.<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative:</strong><br>
Individual command knows how to undo/redo by itself.<br>
<strong>Pros:</strong><br>
Will use less memory (e.g. for <code>delete</code>, just save the contact being deleted).<br>
<strong>Cons:</strong><br>
 We must ensure that the implementation of each individual command are correct.</p>
</div>
<hr>
<div class="paragraph">
<p><strong>Aspect:</strong> Type of commands that can be undone/redone<br></p>
</div>
<div class="paragraph">
<p><strong>Chosen Implementation:</strong> Only include commands that modifies the address book (<code>add</code>, <code>clear</code>, <code>edit</code>).<br>
<strong>Pros:</strong><br>
We only revert changes that are hard to change back (the view can easily be re-modified as no data are lost).<br>
<strong>Cons:</strong><br>
User might think that undo also applies when the list is modified (undoing filtering for example), only to realize that it does not do that, after executing <code>undo</code>.<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative:</strong> Include all commands.<br>
<strong>Pros:</strong><br>
Might be more intuitive for the user.<br>
<strong>Cons:</strong><br>
User have no way of skipping such commands if he or she just want to reset the state of the address book and not the view.<br></p>
</div>
<div class="paragraph">
<p><strong>Additional Info:</strong> See our discussion  <a href="https://github.com/se-edu/addressbook-level4/issues/390#issuecomment-298936672">here</a>.</p>
</div>
<hr>
<div class="paragraph">
<p><strong>Aspect:</strong> Data structure to support the undo/redo commands<br></p>
</div>
<div class="paragraph">
<p><strong>Chosen Implementation:</strong><br>
Use separate stack for undo and redo.<br>
<strong>Pros:</strong><br>
Easy to understand for new Computer Science student undergraduates to understand, who are likely to be the new incoming developers of our project.<br>
<strong>Cons:</strong><br>
Logic is duplicated twice. For example, when a new command is executed, we must remember to update both <code>HistoryManager</code> and <code>UndoRedoStack</code>.<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative:</strong> Use <code>HistoryManager</code> for undo/redo.<br>
<strong>Pros:</strong><br>
We do not need to maintain a separate stack, and just reuse what is already in the codebase.<br>
<strong>Cons:</strong><br>
Requires dealing with commands that have already been undone: We must remember to skip these commands. Violates Single Responsibility Principle and Separation of Concerns as <code>HistoryManager</code> now needs to do two different things.<br>
=== Event class mechanism
==== Summary
The <code>Event</code> class, which is located inside <code>Model</code>, is implemented with similar logic as <code>Person</code> class. We have introduced three commands that modifies the address book: <code>addE</code>, <code>editE</code> and <code>deleteE</code>, which extends <code>UndoableCommand</code>.
An <code>Event</code> consist of three sub-components: <code>Header</code>, <code>Desc</code> and <code>EventDate</code>. Commands such as <code>clear</code>, <code>undo</code> and <code>redo</code> can be used to alter events in the list as they deal with code that directly modifies the address book.</p>
</div>
<div class="paragraph">
<p>The <code>EventPanel</code> is incorporated into the address book <code>MainWindow</code> to display all the events inside the internal list using <code>ObservableList&lt;ReadOnlyEvent&gt;</code>. This process will be explained later on under the section <code>Event card</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="event-methods"><a class="link" href="#event-methods">4.1.3. Event methods</a></h4>
<div class="paragraph">
<p>As stated in the summary, the <code>Event</code> class contains three main methods: <code>addE</code>, <code>editE</code> and <code>deleteE</code>.
The execution flow is similar for all three methods on a higher level. We can demonstrate how different levels of components communicate with one another by referring to an example of <code>addE</code> command in the following sequence diagram:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/AddEventDiagram.PNG" alt="AddEventDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 4.2.1: AddEvent Sequence Diagram</em></p>
</div>
</div>
<div class="sect3">
<h4 id="exceptions"><a class="link" href="#exceptions">4.1.4. Exceptions</a></h4>
<div class="paragraph">
<p>When the user input an event command with its parameters, the validity of the command word is checked inside the <code>AddressBookParser</code>. Next, the presence of the parameter prefixes is checked inside <code>AddEventCommandParser</code>.
An appropriate <code>ParseException</code> will be thrown if the command word or prefixes are incorrect.</p>
</div>
<div class="paragraph">
<p>Before modifying the list of events inside the address book, the system may throw exceptions due to some invalid parameters. Here are the possible exceptions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>EventNotFoundException</code>: This exception can be thrown by <code>editE</code> and <code>deleteE</code> command when the an invalid event index is provided by the user. The index needs to be within the size of the event list at the current state of the address book.</p>
</li>
<li>
<p><code>DuplicateEventException</code>: This exception can be thrown by <code>addE</code> and <code>editE</code> command. The system will first create an <code>Event</code> object with the input parameters, compare the object to all events residing in the event list and throw this exception if there is a duplicate found.</p>
</li>
<li>
<p><code>DateTimeParseException</code>: This exception can be thrown by <code>addE</code> and <code>editE</code> command when the input <code>EventDate</code> parameter is not a valid date. The date&#8217;s format and validity is checked inside the <code>Event</code> class like this:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> EventDate(<span class="predefined-type">String</span> eventDate) <span class="directive">throws</span> IllegalValueException {
    DateTimeFormatter formatter = DateTimeFormatter.ofPattern(<span class="string"><span class="delimiter">&quot;</span><span class="content">yyyy-mm-dd</span><span class="delimiter">&quot;</span></span>)
                    .withResolverStyle(ResolverStyle.STRICT);
    <span class="keyword">try</span> {
        eventLocalDate = LocalDate.parse(eventDate, formatter);
    } <span class="keyword">catch</span> (DateTimeParseException ex) {
        <span class="comment">// ... throw message ...</span>
    }
}</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect3">
<h4 id="event-card"><a class="link" href="#event-card">4.1.5. Event card</a></h4>
<div class="paragraph">
<p>The <code>EventCard</code> class extends <code>UiPart&lt;Region&gt;</code> to represent a distinct part of the UI. The object properties of every event is assigned to a label held by an <code>EventCard</code>. The graphic scene is then constructed with the appropriate <code>FXML</code> files created to support the display of all events.</p>
</div>
<div class="sect4">
<h5 id="design-implementation"><a class="link" href="#design-implementation">Design implementation</a></h5>
<div class="paragraph">
<p>When the user starts the <code>MainApp</code>, the system calls the <code>UiManager</code> to create a new <code>MainWindow</code> and fills it with <code>EventListPanel</code> and other components. The displayed events are created by <code>UniqueEventList</code> and the binding of individual UI elements to the <code>EventCard</code> ensures that any changes to the parameter will be displayed in the <code>EventListPanel</code>.
The sequence diagram below illustrates the interaction between the <code>EventCard</code> and the <code>UiManager</code>:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/EventCardDiagram.PNG" alt="EventCardDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 4.2.2: EventCard Interaction Sequence Diagram</em></p>
</div>
<div class="paragraph">
<p>The events on the <code>EventListPanel</code> is sorted based on <code>EventDate</code>. An event that is coming soon will appear at the top and events with later dates will be further down the list. Expired events will be pushed to the bottom of the list.
This sorting algorithm is introduced in <code>EventDateComparator</code> which implements <code>Comparator&lt;Event&gt;</code>.</p>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>The events follow a certain colored background based on its urgency. The visual guide below describes the color code used:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/EventColorDiagram.png" alt="EventColorDiagram" width="600">
</div>
</div>
<div class="paragraph">
<p><em>Figure 4.2.3: Event Colour Diagram</em></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations-2"><a class="link" href="#design-considerations-2">4.1.6. Design Considerations</a></h4>
<div class="paragraph">
<p><strong>Aspect(future enhancement):</strong> How to implement adding/tagging of contacts into an <code>Event</code> using a <code>Person</code> list parameter<br></p>
</div>
<div class="paragraph">
<p><strong>Chosen Implementation:</strong><br>
Add by the index of contact shown in the <code>PersonListPanel</code>.<br>
<strong>Pros:</strong><br>
System only have to check for validity of index. Better performance compared to Alternative.<br>
<strong>Cons:</strong><br>
Requires user to refer to the <code>PersonListPanel</code> before executing command to add contact into event&#8217;s <code>Person</code> list.<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative:</strong> Add by the name of contact in the <code>Person</code> list.<br>
<strong>Pros:</strong><br>
Easier for users to add using names, do not need to refer to the <code>Person</code> list.<br>
<strong>Cons:</strong><br>
System have to check through the list to check if the contact&#8217;s name exist in the current address book.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="oauth2-fulfilment-mechanism"><a class="link" href="#oauth2-fulfilment-mechanism">4.2. OAuth2 fulfilment mechanism</a></h3>
<div class="sect3">
<h4 id="overview-2"><a class="link" href="#overview-2">4.2.1. Overview</a></h4>
<div class="paragraph">
<p>A command structure has been set-up to fulfil all commands requiring an authentication process against the OAuth2 protocol.
DoC currently only has two such commands, namely, <code>import</code> and <code>export</code>, which require this mechanism. Thus, it is noteworthy
that this implementation has been built for the express purpose of future extension.</p>
</div>
<div class="paragraph">
<p>An exciting possibility is an integration with Facebook, for automated
retrieval of extensive contact and event information. For example, we can populate a users' contact list on DoC, with his
Facebook friend list, which can include information on their birth dates, gender, and even their public profile pictures.</p>
</div>
<div class="paragraph">
<p>The OAuth2 authentication process is fulfilled with the help of the inbuilt <code>BrowserPanel</code>. This requires cross-component communication,
which is implemented in an event-driven manner.</p>
</div>
<div class="paragraph">
<p>The following class diagram illustrates the structure of this mechanism, and its' current applications:<br></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Oauth2ClassDiagram.PNG" alt="Oauth2ClassDiagram" width="100%">
</div>
</div>
<div class="paragraph">
<p><em>Figure 4.3.1 OAuth2 Class Diagram</em></p>
</div>
<div class="paragraph">
<p>An important requirement for all child classes of the <code>Oauth2Command</code> structure, is a valid <code>commandType</code> string of the format:
<code>SERVICEPROVIDER_functionality</code>. This is to allow quick identification in token extraction methods, as different service providers will append
the authentication token differently.</p>
</div>
<div class="paragraph">
<p>This is enforced in the constructor of the <code>Oauth2Command</code> class, and can be seen from the following code snippet:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">protected</span> Oauth2Command(<span class="predefined-type">String</span> inputType)  {
    <span class="keyword">if</span> (!inputTypeValid(inputType)) {
        <span class="keyword">assert</span> <span class="predefined-constant">false</span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Child classes of Oauth2Command must provide a valid command type in the
            format: SERVICEPROVIDER_functionality</span><span class="delimiter">&quot;</span></span>;
    }
    commandType = inputType;
    commandCompleted = <span class="predefined-constant">false</span>;
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="current-usages"><a class="link" href="#current-usages">4.2.2. Current usages</a></h4>
<div class="sect4">
<h5 id="import-contacts-to-doc-from-google-contacts"><a class="link" href="#import-contacts-to-doc-from-google-contacts">Import contacts to DoC from Google Contacts</a></h5>
<div class="paragraph">
<p>The <code>import</code> command uses <code>Google Contacts</code> as a source, and retrieves all of the authenticated user&#8217;s Google Contacts.
This comes in the form of a list of Google&#8217;s <code>Person</code> objects, which are then converted to DoC <code>Person</code> objects with the
help of the <code>GooglePersonConverterUtil</code> class. The newly converted contacts are then stored
to the <code>Model</code> component of DoC.</p>
</div>
</div>
<div class="sect4">
<h5 id="export-contacts-in-doc-to-google-contacts"><a class="link" href="#export-contacts-in-doc-to-google-contacts">Export contacts in DoC to Google Contacts</a></h5>
<div class="paragraph">
<p>The <code>export</code> command converts all contacts currently stored in DoC, with the help of the <code>GooglePersonConverterUtil</code> class,
to a list of Google&#8217;s <code>Person</code> class objects. The newly converted contacts are then exported to the authenticated users' Google Contacts.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect3">
<h4 id="execution-flow"><a class="link" href="#execution-flow">4.2.3. Execution flow</a></h4>
<div class="sect4">
<h5 id="explanation"><a class="link" href="#explanation">Explanation</a></h5>
<div class="paragraph">
<p>The implementation of both the <code>import</code> and <code>export</code> commands are very similar. These are the 5 sequential steps in the flow of execution
for the <code>import</code> command:<br></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The user input of <code>import</code> or <code>export</code> is parsed by the <code>AddressBookParser</code>, and a new instance of an <code>ImportCommand</code> or <code>ExportCommand</code> is returned to the <code>LogicManager</code>,
which then calls the instance&#8217;s <code>execute()</code> method. This is also known as the <strong>input parsing process</strong>.<br></p>
</li>
<li>
<p>The <code>execute()</code> method of <code>import</code> and <code>export</code> then triggers the <strong>authentication process</strong> with the <code>BrowserPanel</code>.<br></p>
</li>
<li>
<p>Upon successful authentication on an <code>import</code> command, the <strong>HTTP request process</strong> is executed, fetching a list.
of the authenticated user&#8217;s Google Contacts from Google&#8217;s servers.<br></p>
</li>
<li>
<p>The <strong>conversion process</strong> then converts this list to a list of DoC <code>Person</code> objects.<br></p>
</li>
<li>
<p>The list of converted DoC <code>Person</code> objects are then added to the <code>Model</code> component.<br></p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Note:</strong> We will not discuss the <strong>input parsing process</strong> in further detail, as it is common to all commands in DoC,
and has been previously illustrated in section 3.3: Logic component.</p>
</div>
</div>
<div class="sect4">
<h5 id="summary"><a class="link" href="#summary">Summary</a></h5>
<div class="paragraph">
<p>The following diagram summarizes the execution flow and illustrates the parallel between the <code>import</code> and <code>export</code> commands:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/import_export_parallel.png" alt="import export parallel" width="80%">
</div>
</div>
<div class="paragraph">
<p><em>Figure 4.3.2: Execution Flow of Import and Export Commands</em></p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect4">
<h5 id="authentication-process"><a class="link" href="#authentication-process">Authentication process</a></h5>
<div class="paragraph">
<p>The <strong>authentication process</strong> is the more involved process of the 3. We can understand it better with the help of the following sequence diagram for the <code>import</code> command:<br></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/AuthenticationSequenceDiagram.png" alt="AuthenticationSequenceDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 4.3.3: Authentication Sequence Diagram</em></p>
</div>
<div class="paragraph">
<p>This is a summary of the steps in the <strong>authentication process</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The <code>execute()</code> method of the <code>ImportCommand</code> is called from the <code>LogicManager</code>, firing an <code>Oauth2BrowserRequestEvent</code> to the <code>BrowserPanel</code>.<br></p>
</li>
<li>
<p>The <code>BrowserPanel</code> handles this event and navigates to the <strong>authentication URL</strong>* provided by the event.<br></p>
</li>
<li>
<p>The user successfully authenticates and grants DoC read permission of the users' Google Contacts.<br></p>
</li>
<li>
<p>The <code>BrowserPanel</code> is redirected to the <strong>success URL</strong>*.<br></p>
</li>
<li>
<p>The <code>BrowserPanel</code> detects the URL change to the <strong>success URL</strong>* and extracts the authentication code appended to the URL,
this code is then attached to a <code>GoogleAuthenticationSuccessEvent</code> fired to the instance of <code>ImportCommand</code>.<br></p>
</li>
<li>
<p>The <code>ImportCommand</code> instance handles the <code>GoogleAuthenticationSuccessEvent</code> and creates the <code>GoogleCredential</code> object.<br></p>
</li>
<li>
<p>The <strong>HTTP request process</strong> ensues.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Note:</strong> The <strong>authentication URL</strong>* is generated by Google&#8217;s <code>oauth2</code> client library. Choice of <strong>success URL</strong>* is discussed
later, under design considerations.</p>
</div>
</div>
<div class="sect4">
<h5 id="http-request-process"><a class="link" href="#http-request-process">HTTP request process</a></h5>
<div class="paragraph">
<p>With the <code>GoogleCredential</code> object generated at the end of the <strong>authentication process</strong>, we can now send HTTP requests
to the Google People API easily using Google&#8217;s Java API client, specifically its' <code>PeopleService</code> class. Its documentation can be found in the following url:<br>
<a href="https://developers.google.com/resources/api-libraries/documentation/people/v1/java/latest/com/google/api/services/people/v1/PeopleService.html" class="bare">https://developers.google.com/resources/api-libraries/documentation/people/v1/java/latest/com/google/api/services/people/v1/PeopleService.html</a></p>
</div>
</div>
<div class="sect4">
<h5 id="conversion-process"><a class="link" href="#conversion-process">Conversion process</a></h5>
<div class="paragraph">
<p>The conversion process is handled entirely by the <code>GooglePersonConverterUtil</code>. Noteworthy design decisions are listed as follows:<br>
<strong>Google Person &#8594; DoC Person</strong><br></p>
</div>
<div class="ulist">
<ul>
<li>
<p>All Google <code>Person</code> objects with a null name or a null phone number are discarded.</p>
</li>
<li>
<p>Google <code>Person</code> objects without an email or an address are given the placeholder constants <code>INVALID_EMAIL@INVALID.COM</code>, and
<code>INVALID_ADDRESS PLEASE UPDATE THIS</code> respectively, in the resulting DoC <code>Person</code>.</p>
</li>
<li>
<p>All DoC <code>Person</code> objects produced are given the tag <code>ImportedFromGoogle</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>DoC Person &#8594; Google Person</strong><br></p>
</div>
<div class="ulist">
<ul>
<li>
<p>DoC&#8217;s <code>Name</code>, <code>Phone</code>, <code>Email</code> and <code>Address</code> objects are added as native Google <code>Person</code> attributes, with similar names while the <code>Tag</code>
object is added as a Google <code>Person</code> object&#8217;s <code>UserDefined</code> attribute.</p>
</li>
<li>
<p><code>ProfilePic</code> cannot be exported due to Google Contact&#8217;s restrictions.</p>
</li>
<li>
<p>The produced Google <code>Person</code> objects are added to a contact group titled <code>Imported from DoC</code> on <code>Google Contacts</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations-3"><a class="link" href="#design-considerations-3">4.2.4. Design Considerations</a></h4>
<div class="paragraph">
<p><strong>Aspect:</strong> How a successful authentication is handled<br></p>
</div>
<div class="paragraph">
<p><strong>Chosen implementation:</strong><br>
Use a hosted domain as the redirection URL for a successful authentication. This hosted domain will be the designated
<strong>success URL</strong>* the <code>BrowserPanel</code> listens for. After the authentication token is extracted from the URL, we then
redirect to a Google Contacts page.<br>
<strong>Pros:</strong><br>
The underlying <code>HTTP GET</code> is sent to a domain under DoC&#8217;s control, reducing the risk of authentication token leak.<br>
<strong>Cons:</strong><br>
The <code>BrowserPanel</code> may display an error page temporarily if the hosted domain is down, however this will not be noticeable if redirection occurs fast.<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative:</strong><br>
Redirect to a Google Contacts page immediately.<br>
<strong>Pros:</strong><br>
No risk of an error page being display.<br>
<strong>Cons:</strong><br>
The underlying <code>HTTP GET</code> containing the authentication token is sent to an external domain.</p>
</div>
<hr>
<div class="paragraph">
<p><strong>Aspect:</strong> Duplication handling<br></p>
</div>
<div class="paragraph">
<p><strong>Chosen implementation:</strong><br>
Do not perform any duplication checks in the implementation of the <code>export</code> command.<br>
<strong>Pros:</strong><br>
We avoid the overhead of having to first import all the user&#8217;s Google contacts, storing them temporarily, then checking them against
DoC&#8217;s <code>Model</code> component to sieve out non-duplicates.<br>
<strong>Cons:</strong><br>
Multiple calls of the <code>export</code> command will result in duplicates being created on the user&#8217;s Google contacts.<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative:</strong><br>
Implement a way to track changes within DoC&#8217;s <code>Model</code> component, or a way to record export history. <br>
<strong>Pros:</strong><br>
We now can choose to export only modified or new <code>Person</code> objects in DoC.<br>
<strong>Cons:</strong><br>
Cross-checking is still required against a user&#8217;s Google contacts, as they can be modified externally.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> While the current choice may affect user experience, it is not app-breaking, and it is the compromise chosen
in this current version of DoC, due to the following redeeming factors:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Google Contacts automatically flags possible duplicates, and offers a quick merging service.</p>
</li>
<li>
<p>Contacts exported from DoC will be added to a designated "ImportedFromGoogle" contact group, and can be filtered out on Google Contacts easily.</p>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2">
<h3 id="email"><a class="link" href="#email">4.3. Email</a></h3>
<div class="sect3">
<h4 id="overview-3"><a class="link" href="#overview-3">4.3.1. Overview</a></h4>
<div class="paragraph">
<p>The <code>EmailCommand</code> is the main driver of this functionality. It links the logic in Addressbook and the content displayed on the Email browser.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/EmailSequenceDiagram.png" alt="EmailSequenceDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 4.4.1: Email Sequence Diagram</em></p>
</div>
<div class="paragraph">
<p>As seen from the picture above, the <code>AddressParser</code> will be able to distinguish the email command and direct it to the <code>EmailCommandParser</code>. Over there the recipient, subject and the body from the command line input is identified.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that the <code>EmailCommandParser</code> will raise a <code>ParseException</code> if the <code>to/</code> is not filled. The <code>subject</code> and <code>body</code> fields are not compulsory.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Once identified, the <code>execute</code> function is called. This function in the <code>EmailCommand</code> would call the <code>updateEmailRecipient</code> function in the Model. Once the fields are updated properly, the <code>EmailCommand</code> will call the desktop mail app and fill in the necessary details.</p>
</div>
<div class="paragraph">
<p>The code below shows the link between the Java Application and the Desktop Mail App.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">private</span> <span class="type">void</span> sendEmail(<span class="predefined-type">String</span> emailTo) <span class="directive">throws</span> <span class="exception">ParseException</span> {
    <span class="keyword">if</span> (emailTo.equalsIgnoreCase(<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>)) {
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="exception">ParseException</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Invalid recipient email.</span><span class="delimiter">&quot;</span></span>);
    }
    Desktop desktop = Desktop.getDesktop();
    <span class="predefined-type">String</span> url = <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>;
    <span class="predefined-type">URI</span> mailTo;

    <span class="comment">// the calling of the desktop mail app happens here</span>
    <span class="keyword">try</span> {
        url = <span class="string"><span class="delimiter">&quot;</span><span class="content">mailTo:</span><span class="delimiter">&quot;</span></span> + emailTo + <span class="string"><span class="delimiter">&quot;</span><span class="content">?subject=</span><span class="delimiter">&quot;</span></span> + <span class="local-variable">this</span>.subject
                + <span class="string"><span class="delimiter">&quot;</span><span class="content">&amp;body=</span><span class="delimiter">&quot;</span></span> + <span class="local-variable">this</span>.body;
        mailTo = <span class="keyword">new</span> <span class="predefined-type">URI</span>(url);
        desktop.mail(mailTo);
    }

    <span class="comment">// ... catches the possible errors and throws the appropriate exceptions</span>
}</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect3">
<h4 id="design-considerations-4"><a class="link" href="#design-considerations-4">4.3.2. Design Considerations</a></h4>
<div class="paragraph">
<p><strong>Aspect:</strong> Implementation of <code>Email</code><br></p>
</div>
<div class="paragraph">
<p><strong>Chosen Implementation:</strong><br>
Uses the inbuilt Email Application.<br>
<strong>Pros:</strong><br>
The email authentication is done by that Email Application. <br>
<strong>Cons:</strong><br>
A new application has to be opened.<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative:</strong> Make use of Gmail API.<br>
<strong>Pros:</strong><br>
Can be emailed from the browser panel itself.<br>
<strong>Cons:</strong><br>
The UI for GMail is very poor on <code>JavaFX WebView</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="map"><a class="link" href="#map">4.4. Map</a></h3>
<div class="sect3">
<h4 id="overview-4"><a class="link" href="#overview-4">4.4.1. Overview</a></h4>
<div class="imageblock">
<div class="content">
<img src="images/Location.png" alt="Location" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 4.5.1: Location Sequence Diagram</em></p>
</div>
<div class="paragraph">
<p>As seen in the above diagram, an event based approach is used to display information on the Browser Panel.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that the <code>LocationCommandParser</code> will raise a <code>ParseException</code> if the <code>INDEX</code> is not stated.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Once the Address book parser identifies the user command as a valid location command, it will make use of the Google Event bus to transmit the event.
The browser panel has subscribed for that particular event and therefore when the event is passed, the browser panel will pick it up and execute the function.
If the there is only one INDEX, This will eventually render the browser panel with Google Maps and a marker pointing at the address of the requested contact.
If there would be more than one INDEX present, then the direction from one place to another will be shown by the Google Maps.</p>
</div>
<div class="paragraph">
<p>This rendering of Google Maps is done via calling the URL over in <code>BrowserPanel</code> as shown in the code snippet below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">private</span> <span class="type">void</span> loadPersonLocation(<span class="predefined-type">List</span>&lt;ReadOnlyPerson&gt; person) {
        <span class="comment">// determines if it is either a location url or a route url based on the input</span>
        <span class="predefined-type">String</span> url = (person.size() == <span class="integer">1</span>) ? GOOGLE_MAPS_URL_PLACE : GOOGLE_MAPS_URL_DIR;
        <span class="predefined-type">String</span> result = <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>;
        <span class="keyword">for</span> (ReadOnlyPerson ppl: person) {
            <span class="comment">// ... logic to add the addresses to the result string ...</span>
        }
        <span class="comment">// loads the Google Map with the appropriate URL</span>
        loadPage(url + result);
    }</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations-5"><a class="link" href="#design-considerations-5">4.4.2. Design Considerations</a></h4>
<div class="paragraph">
<p><strong>Aspect:</strong> Implementation of <code>map</code><br></p>
</div>
<div class="paragraph">
<p><strong>Chosen Implementation:</strong><br>
Add a new class that extends <code>Command</code> that uses the Google Maps URL.<br>
<strong>Pros:</strong><br>
The map can be easily loaded without needing to call the GoogleMaps API. <br>
<strong>Cons:</strong><br>
Only functions that can be sent via URL can be used.<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative:</strong> Make use of Google Maps API.<br>
<strong>Pros:</strong><br>
More functions such as radius and many more could have been added.<br>
<strong>Cons:</strong><br>
Take a longer time to load the map.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2">
<h3 id="removetag"><a class="link" href="#removetag">4.5. RemoveTag</a></h3>
<div class="sect3">
<h4 id="overview-5"><a class="link" href="#overview-5">4.5.1. Overview</a></h4>
<div class="paragraph">
<p>The removeTag mechanism is facilitated by the <code>RemoveTagCommand</code> class which is inherited from the
<code>UndoableCommand</code> class. If the indexes are not stated, the particular tag is removed from all contacts.
Else, only those chosen indexes has its tag removed. All the indexes are based on the current list.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/RemoveTagSequenceDiagram.png" alt="RemoveTagSequenceDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 4.6.1: RemoveTag Sequence Diagram</em></p>
</div>
<div class="paragraph">
<p>As shown in the diagram above, when the user executes the command <code>removeTag</code>, the <code>RemoveTagCommandParser</code> class will parse the tag and indexes if given, then call the <code>RemoveTagCommand</code>. In <code>RemoveTagCommand</code> the <code>execute()</code> function is called.
This will invoke the <code>removeTag</code> function that resides in the <code>LogicManager</code>, which will remove the specific tag from specific or all contacts based on the call made by the user. This changes will then be updated and stored.</p>
</div>
<div class="paragraph">
<p>The main logic behind <code>RemoveTagCommand</code> happens in the <code>ModelManager</code>. A brief overview of that code is shown below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">void</span> removeTag(ObservableList&lt;ReadOnlyPerson&gt; persons, <span class="predefined-type">Set</span>&lt;Tag&gt; tag)
        <span class="directive">throws</span> PersonNotFoundException, IllegalValueException {
    <span class="type">int</span> counter = <span class="integer">0</span>; <span class="comment">// to help in determining if the tag is valid</span>

    <span class="comment">// if an empty list of persons is provided, it is assumed to removeTags from everyone</span>
    <span class="keyword">if</span> (persons.isEmpty()) {
        persons.setAll(addressBook.getPersonList());
    }
    <span class="keyword">for</span> (ReadOnlyPerson person : persons) {
        <span class="comment">// only executed if the contact has that particular tag present</span>
        <span class="keyword">if</span> (!<span class="predefined-type">Collections</span>.disjoint(person.getTags(), tag)) {
            <span class="comment">// ... logic to removeTags from the respective contacts ...</span>
            counter ++;
        }
    }

    <span class="comment">// to check if the tag is valid</span>
    <span class="keyword">if</span> (counter == <span class="integer">0</span>) {
        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalValueException(<span class="string"><span class="delimiter">&quot;</span><span class="content">The Tag is invalid!</span><span class="delimiter">&quot;</span></span>);
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that the <code>removeTag</code> function will raise a <code>IllegalValueException</code> if the <code>tag</code> is not valid. This is shown in the above code snippet.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations-6"><a class="link" href="#design-considerations-6">4.5.2. Design Considerations</a></h4>
<div class="paragraph">
<p><strong>Aspect:</strong> Implementation of <code>removeTag</code><br></p>
</div>
<div class="paragraph">
<p><strong>Chosen Implementation:</strong><br>
Directly removes a certain tag from specified or all contacts.<br>
<strong>Pros:</strong><br>
Easier as multiple contacts are updated at one go. <br>
<strong>Cons:</strong><br>
It only can remove one tag at a time. If more tags has to be removed from multiple contacts, this function has to be called more times depending on the number of the tags that has to be removed.<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative:</strong> Usage of <code>edit</code> command to remove the tags.<br>
<strong>Pros:</strong><br>
One lesser command for the user to remember.<br>
<strong>Cons:</strong><br>
It is very tiring for the user to update each and everyone of the contacts in the contact list, if he decided to remove the tag from everyone.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="find"><a class="link" href="#find">4.6. Find</a></h3>
<div class="sect3">
<h4 id="overview-6"><a class="link" href="#overview-6">4.6.1. Overview</a></h4>
<div class="paragraph">
<p>The <code>FindCommand</code> class is inherited from the
<code>Command</code> class.It allows the user to search his contacts either by the name of the contact or by the tag of the contact.</p>
</div>
<div class="paragraph">
<p>The existing <code>NameContainsKeywordsPredicate</code> was modified to suit the new needs.
The modified code is shown below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">boolean</span> test(ReadOnlyPerson person) {
        <span class="comment">// ...  find by name logic ...</span>
        <span class="keyword">if</span> (validNames) {
            <span class="keyword">return</span> validNames;
        }
        <span class="comment">// ... find by tags logic ...</span>
        <span class="keyword">if</span> (validTags) {
            <span class="keyword">break</span>;
        }
        <span class="keyword">return</span> validTags;
    }</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/FindSequenceDiagram.png" alt="FindSequenceDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 4.7.1: Find Sequence Diagram</em></p>
</div>
<div class="paragraph">
<p>As shown in the diagram above, when the user executes the command <code>find</code>, the <code>FindCommandParser</code> class will parse the user&#8217;s input, then call the <code>FindCommand</code>. In <code>FindCommand</code> the <code>execute()</code> function is called.
This will invoke the <code>updateFilteredPersonList</code> function that resides in the <code>LogicManager</code>, which will filter the contacts based on their name and tag that matches the call made by the user. This changes will then be updated on the <code>PersonalListPanel</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations-7"><a class="link" href="#design-considerations-7">4.6.2. Design Considerations</a></h4>
<div class="paragraph">
<p><strong>Aspect:</strong> Implementation of <code>find</code><br></p>
</div>
<div class="paragraph">
<p><strong>Chosen Implementation:</strong><br>
Directly find contacts based on both name and tag.<br>
<strong>Pros:</strong><br>
One function that can be used to search by name and tag. <br>
<strong>Cons:</strong><br>
If name and tag are similar, the contacts with both the same name and tag will be shown.<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative:</strong> Having two functions. One for find by name and another for find by tags.<br>
<strong>Pros:</strong><br>
Easier to find a person by name or by tag, if both name and tag have similar Strings.<br>
<strong>Cons:</strong><br>
Extra command for the user to remember.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="updateprofilepic-deleteprofilepic-mechanism"><a class="link" href="#updateprofilepic-deleteprofilepic-mechanism">4.7. UpdateProfilePic/DeleteProfilePic mechanism</a></h3>
<div class="sect3">
<h4 id="overview-7"><a class="link" href="#overview-7">4.7.1. Overview</a></h4>
<div class="paragraph">
<p>The UpdateProfilePic/DeleteProfilePic mechanism is facilitated by a <code>ProfilePic</code> class, which is a property class of the <code>Person</code> class. It supports the updating and deleting of profile pictures of each contact. These two commands inherit from <code>Command</code>.</p>
</div>
<div class="paragraph">
<p><code>ProfilePic</code> essentially stores a <strong>valid</strong> <code>URL</code> of an image that will be displayed as the contacts&#8217;s profile picture. Whenever a new contact is added, the contact&#8217;s <code>ProfilePic</code> property will be set to that of a default image. The command: <code>updateProfilePic</code> can then be called to change this property. When the command <code>deleteProfilePic</code> is called, the <code>ProfilePic</code> property of the selected contact will be changed back to the default profile picture.</p>
</div>
<div class="paragraph">
<p>Like the other properties of the <code>Person</code> class, the <code>ProfilePic</code> property will also be saved to the chosen storage file. If the image that is referred to by the <code>ProfilePic</code> is moved or deleted, the <code>ProfilePic</code> will reset back to the image of the default profile picture.</p>
</div>
<div class="paragraph">
<p>The <code>updateProfilePic</code>  command works by taking in the index of the chosen contact and updating this contact according to the <code>ProfilePic</code> given. To do so, the <code>updateProfilePic</code> command takes in a URL of the image that the profile picture is to be changed to. This will cause the app to instantiate a new <code>ProfilePic</code> object and check if the URL is valid and if it is valid, the app will proceed to update the contact with the new profile picture, otherwise an IllegalValueException will be thrown.</p>
</div>
<div class="paragraph">
<p>In addition, the image will be downloaded into a local folder called: <code>ProfilePics/</code> that is generated when the app initializes. This folder is created in the same folder as the <code>src</code> folder. (See code snippet below)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">if</span> (profilePic.toString().compareTo(ProfilePic.DEFAULT_URL) == <span class="integer">0</span>) {
    deleteOldFile(personToUpdateProfilePic);
    newProfilePic = profilePic;
} <span class="keyword">else</span> {
    <span class="predefined-type">String</span> newFile;
    createNewDirectory();
    newFile = setFileName(personToUpdateProfilePic);
    createNewFile(newFile);
    newProfilePic = downloadImage(newFile);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>deleteProfilePic</code> command works by taking in the index of the chosen contact and updating the <code>ProfilePic</code> property of the chosen contact to the default profile picture.</p>
</div>
<div class="paragraph">
<p>Below are the sequence diagrams of each command to illustrate how they work:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/updateProfilePicSD.jpg" alt="updateProfilePicSD" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 4.8.1: UpdateProfilePic Sequence Diagram</em></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/deleteProfilePicSD.jpg" alt="deleteProfilePicSD" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 4.8.2: DeleteProfilePic Sequence Diagram</em></p>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations-8"><a class="link" href="#design-considerations-8">4.7.2. Design Considerations</a></h4>
<div class="paragraph">
<p><strong>Aspect:</strong> Implementation of <code>updateProfilePic</code><br></p>
</div>
<div class="paragraph">
<p><strong>Chosen Implementation:</strong><br>
Add a new class that extends <code>Command</code>.<br>
<strong>Pros:</strong><br>
The other properties of a contact can be quickly updated, using the <code>add</code> or <code>edit</code> commands, without waiting for an image to be loaded. <br>
<strong>Cons:</strong><br>
Users have to remember another command.<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative:</strong> Just add the function to the <code>add</code> and <code>edit</code> commands.<br>
<strong>Pros:</strong><br>
Users do not have to remember a new command.<br>
<strong>Cons:</strong><br>
The image might take a while to load, so all the data takes longer to be updated.</p>
</div>
<hr>
<div class="paragraph">
<p><strong>Aspect:</strong> Implementation of <code>deleteProfilePic</code><br></p>
</div>
<div class="paragraph">
<p><strong>Chosen Implementation:</strong><br>
Add a new class that extends <code>Command</code>.<br>
<strong>Pros:</strong><br>
A quick way to revert the profile picture back to default. <br>
<strong>Cons:</strong><br>
Redundant as it is a special case of <code>updateProfilePic</code><br></p>
</div>
<div class="paragraph">
<p><strong>Alternative:</strong> Not have this command at all.<br>
<strong>Pros:</strong><br>
Lesser commands for the user to remember.<br>
<strong>Cons:</strong><br>
The user might not know what the default image URL is.</p>
</div>
<hr>
<div class="paragraph">
<p><strong>Aspect:</strong> Storage of images of profile pictures<br></p>
</div>
<div class="paragraph">
<p><strong>Chosen Implementation:</strong><br>
Store the images in a local folder: <code>ProfilePics/</code>.<br>
<strong>Pros:</strong><br>
After the initial download, subsequent retrieval of image for display can be done without visible lag and if the original image gets deleted or moved, the profile picture can still be displayed. <br>
<strong>Cons:</strong><br>
Initial download may cause a visible lag and freeze the UI for some time.<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative:</strong> Not store the images<br>
<strong>Pros:</strong><br>
No space requirement to store the images locally<br>
<strong>Cons:</strong><br>
There might be a visible lag every time an image is displayed as a profile picture, if the image is too big and on the internet.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="viewcount-tracking"><a class="link" href="#viewcount-tracking">4.8. ViewCount Tracking</a></h3>
<div class="sect3">
<h4 id="overview-8"><a class="link" href="#overview-8">4.8.1. Overview</a></h4>
<div class="paragraph">
<p>The <code>viewCount</code> variable is a <code>private int</code> variable of the <code>Person</code> class. This variable is updated whenever a <code>PersonPanelSelectionChangedEvent</code> is raised. This means that whenever a contact is selected, whether by the <code>select</code> command or by clicking on the <code>PersonCard</code> on the UI, the contact associated with the selected <code>PersonCard</code> will have its <code>viewCount</code> variable incremented by 1.</p>
</div>
<div class="paragraph">
<p>To listen for the <code>PersonPanelSelectionChangedEvent</code>, a listener is placed in the <code>MainApp</code> object, which ensures that the <code>Model</code> associated to it is updated with the right <code>Person</code> object that has its <code>viewCount</code> updated. (See code snippet below)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">private</span> <span class="type">void</span> handlePersonPanelSelectionChangedEvent(PersonPanelSelectionChangedEvent event) {
    logger.info(LogsCenter.getEventHandlingLogMessage(event));
    <span class="keyword">if</span> (event.getNewSelection().person != <span class="predefined-constant">null</span>) {
        Person personSelected = <span class="keyword">new</span> Person(event.getNewSelection().person);
        personSelected.setViewCount(personSelected.getViewCount() + <span class="integer">1</span>);
        <span class="keyword">try</span> {
            model.updatePerson(event.getNewSelection().person, personSelected);
        } <span class="keyword">catch</span> (DuplicatePersonException dpe) {
            <span class="keyword">assert</span> <span class="predefined-constant">false</span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Impossible to be duplicate</span><span class="delimiter">&quot;</span></span>;
        } <span class="keyword">catch</span> (PersonNotFoundException pnfe) {
            <span class="keyword">assert</span> <span class="predefined-constant">false</span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Impossible not to be found</span><span class="delimiter">&quot;</span></span>;
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As the <code>viewCount</code> is not displayed on the UI, when this variable of a contact is updated, no <code>AddressBookChangedEvent</code> is raised, so the UI will not be refreshed unnecessarily.</p>
</div>
<div class="paragraph">
<p>Right before the app closes, the app will sort the <code>Person</code> objects in the <code>AddressBook</code> such that the <code>Person</code> objects will be displayed from highest <code>viewCount</code> to lowest. (See code snippet below)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">void</span> sortByViewCount() {
    AddressBook addressBookToSort = <span class="keyword">new</span> AddressBook(addressBook);
    ObservableList&lt;ReadOnlyPerson&gt; listToSort = addressBookToSort.getPersonList();
    <span class="predefined-type">ArrayList</span>&lt;ReadOnlyPerson&gt; listToSortedCopy = <span class="keyword">new</span> <span class="predefined-type">ArrayList</span>&lt;&gt;();
    <span class="keyword">for</span> (ReadOnlyPerson r : listToSort) {
        listToSortedCopy.add(r);
    }
    <span class="predefined-type">Collections</span>.sort(listToSortedCopy, <span class="keyword">new</span> ViewCountComparator());

    <span class="keyword">try</span> {
        addressBookToSort.setPersons(listToSortedCopy);
    } <span class="keyword">catch</span> (DuplicatePersonException dpe) {
        <span class="keyword">assert</span> <span class="predefined-constant">false</span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Impossible to be duplicate</span><span class="delimiter">&quot;</span></span>;
    }

    resetData(addressBookToSort);
}</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>Below is the sequence diagram for how the <code>viewCount</code> object is updated:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/updateViewCountSD.png" alt="updateViewCountSD" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 4.9.1: UpdateViewCount Sequence Diagram</em></p>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations-9"><a class="link" href="#design-considerations-9">4.8.2. Design Considerations</a></h4>
<div class="paragraph">
<p><strong>Aspect:</strong> Implementation of <code>viewCount</code><br></p>
</div>
<div class="paragraph">
<p><strong>Chosen Implementation:</strong><br>
Add a new variable to the <code>Person</code> class.<br>
<strong>Pros:</strong><br>
No extra classes have to be created and it is clear which <code>Person</code> has a <code>viewCount</code> of what value.<br>
<strong>Cons:</strong><br>
The <code>Model</code> has to be updated every time a new <code>PersonCard</code> is selected.<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative:</strong> Track all the <code>viewCount</code> in a separate file or class.<br>
<strong>Pros:</strong><br>
<code>Model</code> does not need to be updated and no existing class will be changed.<br>
<strong>Cons:</strong><br>
File IO will be required for the saving of the list or the list has to be converted into XML and stored with the rest of the data is <code>addressbook.xml</code>.</p>
</div>
<hr>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p><strong>Aspect:</strong> Updating of <code>Model</code><br></p>
</div>
<div class="paragraph">
<p><strong>Chosen Implementation:</strong><br>
Update <code>Model</code> without raising <code>AddressBookChangedEvent</code>.<br>
<strong>Pros:</strong><br></p>
</div>
<div class="paragraph">
<p>No unnecessary refreshing of the UI.    <br>
<strong>Cons:</strong><br>
The <code>viewCount</code> variable of each <code>Person</code> is only saved to <code>addressbook.xml</code> only when the app stops or when the next <code>AddressBookChangedEvent</code> is raised.<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative:</strong> Update <code>Model</code> normally.<br></p>
</div>
<div class="paragraph">
<p><strong>Pros:</strong><br>
The <code>addressbook.xml</code> file is always updated once any value is changed.<br>
<strong>Cons:</strong><br>
The UI will be refreshed unnecessarily, which may cause a visible lag if large image files are reloaded.</p>
</div>
<hr>
<div class="paragraph">
<p><strong>Aspect:</strong> Sorting by <code>viewCount</code><br></p>
</div>
<div class="paragraph">
<p><strong>Chosen Implementation:</strong><br>
Sort right before app stops.<br>
<strong>Pros:</strong><br>
When app is started the next time, it can be started immediately, without having to perform the sort.<br>
<strong>Cons:</strong><br>
The app might lag a bit when stopping.<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative:</strong> Sort right before app starts.<br>
<strong>Pros:</strong><br>
The app will stop quickly.<br>
<strong>Cons:</strong><br>
The app will take a while to start.<br>
<strong>Alternative 3:</strong> Whenever a viewCount is changed.<br>
<strong>Pros:</strong> The app will always show the updated order.<br>
<strong>Cons:</strong> The app will lag slightly each time a <code>PersonCard</code> is selected.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2">
<h3 id="unknown-input-parsing"><a class="link" href="#unknown-input-parsing">4.9. Unknown input parsing</a></h3>
<div class="sect3">
<h4 id="overview-9"><a class="link" href="#overview-9">4.9.1. Overview</a></h4>
<div class="paragraph">
<p>To enhance user experience, a similarity-matching mechanism is employed to detect and parse unknown user input, matching them
to probable system-recognized commands.
The Levenshtein distance is used as a metric to measure similarity.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s a brief explanation of this metric:<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre>The Levenshtein distance between two strings, is the minimum number of insertion, deletion or
substitution operations required to transform one string to the other.</pre>
</div>
</div>
<div class="paragraph">
<p>This mechanism is achieved with an enhancement on the original <code>AddressBookParser</code>, and the introduction of a new class, <code>UnknownCommand</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="execution-flow-2"><a class="link" href="#execution-flow-2">4.9.2. Execution flow</a></h4>
<div class="sect4">
<h5 id="explanation-2"><a class="link" href="#explanation-2">Explanation</a></h5>
<div class="paragraph">
<p>When a unknown input is entered, the <code>AddressBookParser</code> instantiates an <code>UnknownCommand</code> object with this input.
The 'AddressBookParser' then calls the <code>suggestionFound()</code> method of this instance. This method proceeds to match the unknown input against
a list of system-recognized command words. If a match is found, we instantiate the suggested command within the <code>UnknownCommand</code> object,
and prompt the user for a response. If the user accepts the suggestion, we retrieve the instance of the suggested command and execute it.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong><br></p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the minimum Levenshtein distance is shared by two matches, the lexicographically smaller match will be chosen.</p>
</li>
<li>
<p>We reject any unknown input, whose <code>commandWord</code> exceeds the maximum acceptable length. This number is chosen based on the set
maximum acceptable Levenshtein distance and the length of the longest system-recognized <code>commandWord</code> in DoC:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>maximum acceptable length = length of longest system-recognized `commandWord` + maximum acceptable Levenshtein distance

Current state of DoC: 18 = 16 + 2</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>If a match is found and the input contains invalid parameters, we do not prompt the user for a response. Instead we prompt
the user with an invalid command format message, and a format guideline on the matched command.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="summary-2"><a class="link" href="#summary-2">Summary</a></h5>
<div class="paragraph">
<p>The following activity diagram illustrates the the execution flow of the <code>parseCommand()</code> method, of the <code>AddressBookParser</code>,
with this enhancement in place:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/ParseCommandActivityDiagram.png" alt="ParseCommandActivityDiagram" width="100%">
</div>
</div>
<div class="paragraph">
<p><em>Figure 4.10.1: ParseCommand Activity Diagram</em></p>
</div>
<div class="paragraph">
<p>As shown in the diagram above, actions enclosed in a green box are the enhancements applied to the original <code>AddressBookParser</code>,
for the purpose of this mechanism.</p>
</div>
<div class="paragraph">
<p>To better understand the underlying logic of this enhancement, you can refer to the following code snippets:<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre>if (correctionPrompted) {
    if (userAcceptsSuggestion(commandWord)) {
        Command suggestedCommand = unknownCommand.getSuggestedCommand();
        resetCorrectionChecker();
        return suggestedCommand;
    } else {
        resetCorrectionChecker();
    }
}
.
.</pre>
</div>
</div>
<div class="paragraph">
<p>As shown in the snippet above, once a correction has been prompted, the prompting mechanism will be reset one command later
even if we do not receive a positive response from the user. This means that we only offer the user one window of
opportunity to accept the suggestion.</p>
</div>
<div class="paragraph">
<p>Responses that are not recognized in the <code>userAcceptsSuggestion(commandWord)</code> method, will be parsed as regular input. This means that we do
not require a negative response to a correction prompt.</p>
</div>
<div class="paragraph">
<p>Processing of unknown user input, is performed in the default case of the following switch:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>.
.
switch (commandWord) {
    .
    .
    default:
        unknownCommand = new UnknownCommand(commandWord, arguments);
        if (unknownCommand.suggestionFound()) {
            correctionPrompted = true;
            return unknownCommand;
        } else {
            unknownCommand = null;
        }
        throw new ParseException(MESSAGE_UNKNOWN_COMMAND);
}</pre>
</div>
</div>
<div class="paragraph">
<p>As shown in the snippet above, when a possible match is found, we set the boolean <code>correctionPrompted</code> to <code>true</code>, to begin checking for a
response to our prompt, which is shown in the previous code snippet.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations-10"><a class="link" href="#design-considerations-10">4.9.3. Design considerations</a></h4>
<div class="paragraph">
<p><strong>Aspect:</strong> Choice of acceptable Levenshtein distance<br></p>
</div>
<div class="paragraph">
<p><strong>Chosen implementation:</strong><br>
Set the maximum acceptable Levenshtein distance to 1 less than the length of the shortest command in DoC, which is currently 3.<br>
<strong>Pros:</strong><br>
The similarity matching will be more likely to yield relevant result, than if the Levenshtein distance were to be set at the length of the shortest command in DoC or higher.
For example, the current shortest command in DoC is 'add' with a length of 3. If were to set the maximum acceptable Levenshtein distance to 3, any random 3 letter sequence would be matched successfully.<br>
<strong>Cons:</strong><br>
Typos on longer commands have a higher propensity to produce a string with a Levenshtein distance of more than 2.
These cannot be detected with this implementation.<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative 1:</strong><br>
Set a maximum acceptable Levenshtein distance of 3 or higher.<br>
<strong>Pros:</strong><br>
Stronger similarity matching capabilities.<br>
<strong>Cons:</strong><br>
Random user input might yield positive matches.<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative 2:</strong><br>
Lengthen sytem-recognized command words.<br>
<strong>Pros:</strong><br>
We can set a higher maximum acceptable Levenshtein distance without the cons mentioned in  alternative 1.<br>
<strong>Cons:</strong><br>
The user would have to type more for each command.</p>
</div>
<hr>
<div class="paragraph">
<p><strong>Aspect:</strong> Parsing user response after a suggestion is prompted<br></p>
</div>
<div class="paragraph">
<p><strong>Chosen implementation:</strong><br>
DoC prompts the user for a response of "yes" or "y", which executes the suggested command. Upon any another response,
the system discards the suggested command and begins the parsing process again.<br>
<strong>Pros:</strong><br>
If the mechanism has wrongly matched an unknown input, the user can simply ignore the suggestion prompt and continue without
further action.<br>
<strong>Cons:</strong><br>
The user might infer that a response of "no" or "n" is required to reject the suggestion, and enters an input accordingly.
This may begin a loop that proceeds ad infinitum.<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative 1:</strong><br>
DoC prompts the user for a response of "no" or "n" to indicate rejection.<br>
<strong>Pros:</strong><br>
The handling would be more intuitive to the user.<br>
<strong>Cons:</strong><br>
An extra step is presented to the user on a wrong match, affecting the user&#8217;s experience.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> In our chosen implementation, we mitigate the mentioned cons by including explicit instructions in the suggestion prompt,
that a response is only required if the user accepts the match.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="logging"><a class="link" href="#logging">5. Logging</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="overview-10"><a class="link" href="#overview-10">5.1. Overview</a></h3>
<div class="paragraph">
<p>We are using <code>java.util.logging</code> package for logging. The <code>LogsCenter</code> class is used to manage the logging levels and logging destinations, as such:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The logging level can be controlled using the <code>logLevel</code> setting in the configuration file (See <a href="#configuration">Configuration</a>)</p>
</li>
<li>
<p>The <code>Logger</code> for a class can be obtained using <code>LogsCenter.getLogger(Class)</code> which will log messages according to the specified logging level</p>
</li>
<li>
<p>The log messages are currently output through: <code>Console</code> and to a <code>.log</code> file.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Logging Levels:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>SEVERE</code> : Critical problem detected which may possibly cause the termination of the application</p>
</li>
<li>
<p><code>WARNING</code> : Can continue, but with caution</p>
</li>
<li>
<p><code>INFO</code> : Information showing the noteworthy actions by the App</p>
</li>
<li>
<p><code>FINE</code> : Details that is not usually noteworthy but may be useful in debugging e.g. print the actual list instead of just its size</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="configuration"><a class="link" href="#configuration">5.2. Configuration</a></h3>
<div class="paragraph">
<p>Certain properties of the application can be controlled (e.g App name, logging level) through the configuration file (default: <code>config.json</code>).</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="documentation"><a class="link" href="#documentation">6. Documentation</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>We use asciidoc for writing documentation.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
We chose asciidoc over Markdown because asciidoc, although a bit more complex than Markdown, provides more flexibility in formatting.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="editing-documentation"><a class="link" href="#editing-documentation">6.1. Editing Documentation</a></h3>
<div class="paragraph">
<p>See <a href="UsingGradle.html#rendering-asciidoc-files">UsingGradle.adoc</a> to learn how to render <code>.adoc</code> files locally to preview the end result of your edits.
Alternatively, you can download the AsciiDoc plugin for IntelliJ, which allows you to preview the changes you have made to your <code>.adoc</code> files in real-time.</p>
</div>
</div>
<div class="sect2">
<h3 id="publishing-documentation"><a class="link" href="#publishing-documentation">6.2. Publishing Documentation</a></h3>
<div class="paragraph">
<p>See <a href="UsingTravis.html#deploying-github-pages">UsingTravis.adoc</a> to learn how to deploy GitHub Pages using Travis.</p>
</div>
</div>
<div class="sect2">
<h3 id="converting-documentation-to-pdf-format"><a class="link" href="#converting-documentation-to-pdf-format">6.3. Converting Documentation to PDF format</a></h3>
<div class="paragraph">
<p>We use <a href="https://www.google.com/chrome/browser/desktop/">Google Chrome</a> for converting documentation to PDF format, as Chrome&#8217;s PDF engine preserves hyperlinks used in webpages.</p>
</div>
<div class="paragraph">
<p>Here are the steps to convert the project documentation files to PDF format:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Follow the instructions in <a href="UsingGradle.html#rendering-asciidoc-files">UsingGradle.adoc</a> to convert the AsciiDoc files in the <code>docs/</code> folder to HTML format.</p>
</li>
<li>
<p>Go to your generated HTML files in the <code>build/docs</code> folder, right click on them and select <code>Open with</code> &#8594; <code>Google Chrome</code>.</p>
</li>
<li>
<p>Within Chrome, click on the <code>Print</code> option in Chrome&#8217;s menu.</p>
</li>
<li>
<p>Set the destination to <code>Save as PDF</code>, then click <code>Save</code> to save a copy of the file in PDF format. For best results, use the settings indicated in the screenshot on the next page.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/chrome_save_as_pdf.png" alt="chrome save as pdf" width="300">
</div>
</div>
<div class="paragraph">
<p><em>Figure 6.3.1 : Saving documentation as PDF files in Chrome</em></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="testing"><a class="link" href="#testing">7. Testing</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="running-tests"><a class="link" href="#running-tests">7.1. Running Tests</a></h3>
<div class="paragraph">
<p>There are three ways to run tests.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The most reliable way to run tests is the 3rd one. The first two methods might fail some GUI tests due to platform/resolution-specific idiosyncrasies.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Method 1: Using IntelliJ JUnit test runner</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>To run all tests, right-click on the <code>src/test/java</code> folder and choose <code>Run 'All Tests'</code>.</p>
</li>
<li>
<p>To run a subset of tests, you can right-click on a test package, test class, or a test and choose <code>Run 'ABC'</code>.</p>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p><strong>Method 2: Using Gradle</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Open a console and run the command <code>gradlew clean allTests</code> (Mac/Linux: <code>./gradlew clean allTests</code>).</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
See <a href="UsingGradle.html">UsingGradle.adoc</a> for more info on how to run tests using Gradle.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Method 3: Using Gradle (headless)</strong></p>
</div>
<div class="paragraph">
<p>Thanks to the <a href="https://github.com/TestFX/TestFX">TestFX</a> library we use, our GUI tests can be run in the <em>headless</em> mode. In the headless mode, GUI tests do not show up on the screen. That means the developer can do other things on the Computer while the tests are running.</p>
</div>
<div class="paragraph">
<p>To run tests in headless mode, open a console and run the command <code>gradlew clean headless allTests</code> (Mac/Linux: <code>./gradlew clean headless allTests</code>).</p>
</div>
</div>
<div class="sect2">
<h3 id="types-of-tests"><a class="link" href="#types-of-tests">7.2. Types of tests</a></h3>
<div class="paragraph">
<p>We have two types of tests:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>GUI Tests</strong> - These are tests involving the GUI. They include:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><em>System Tests</em> that test the entire App by simulating user actions on the GUI. These are in the <code>systemtests</code> package.</p>
</li>
<li>
<p><em>Unit tests</em> that test the individual components. These are in <code>seedu.address.ui</code> package.</p>
</li>
</ol>
</div>
</li>
<li>
<p><strong>Non-GUI Tests</strong> - These are tests not involving the GUI. They include:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><em>Unit tests</em> targeting the lowest level methods/classes.<br>
e.g. <code>seedu.address.commons.StringUtilTest</code></p>
</li>
<li>
<p><em>Integration tests</em> that are checking the integration of multiple code units (those code units are assumed to be working).<br>
e.g. <code>seedu.address.storage.StorageManagerTest</code></p>
</li>
<li>
<p>Hybrids of unit and integration tests. These test are checking multiple code units as well as how the are connected together.<br>
e.g. <code>seedu.address.logic.LogicManagerTest</code></p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="troubleshooting-testing"><a class="link" href="#troubleshooting-testing">7.3. Troubleshooting Testing</a></h3>
<div class="paragraph">
<p><strong>Problem: <code>HelpWindowTest</code> fails with a <code>NullPointerException</code>.</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Reason: One of its dependencies, <code>UserGuide.html</code> in <code>src/main/resources/docs</code> is missing.</p>
</li>
<li>
<p>Solution: Execute Gradle task <code>processResources</code>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dev-ops"><a class="link" href="#dev-ops">8. Dev Ops</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="build-automation"><a class="link" href="#build-automation">8.1. Build Automation</a></h3>
<div class="paragraph">
<p>See <a href="UsingGradle.html">UsingGradle.adoc</a> to learn how to use Gradle for build automation.</p>
</div>
</div>
<div class="sect2">
<h3 id="continuous-integration"><a class="link" href="#continuous-integration">8.2. Continuous Integration</a></h3>
<div class="paragraph">
<p>We use <a href="https://travis-ci.org/">Travis CI</a> and <a href="https://www.appveyor.com/">AppVeyor</a> to perform <em>Continuous Integration</em> on our projects. See <a href="UsingTravis.html">UsingTravis.adoc</a> and <a href="UsingAppVeyor.html">UsingAppVeyor.adoc</a> for more details.</p>
</div>
</div>
<div class="sect2">
<h3 id="making-a-release"><a class="link" href="#making-a-release">8.3. Making a Release</a></h3>
<div class="paragraph">
<p>Here are the steps to create a new release.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Update the version number in <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/MainApp.java"><code>MainApp.java</code></a>.</p>
</li>
<li>
<p>Generate a JAR file <a href="UsingGradle.html#creating-the-jar-file">using Gradle</a>.</p>
</li>
<li>
<p>Tag the repo with the version number. e.g. <code>v0.1</code>.</p>
</li>
<li>
<p><a href="https://help.github.com/articles/creating-releases/">Create a new release using GitHub</a> and upload the JAR file you created.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="managing-dependencies"><a class="link" href="#managing-dependencies">8.4. Managing Dependencies</a></h3>
<div class="paragraph">
<p>A project often depends on third-party libraries. For example, Address Book depends on the <a href="http://wiki.fasterxml.com/JacksonHome">Jackson library</a> for XML parsing. Managing these <em>dependencies</em> can be automated using Gradle. For example, Gradle can download the dependencies automatically, which is better than these alternatives.<br>
a. Include those libraries in the repo (this bloats the repo size).<br>
b. Require developers to download those libraries manually (this creates extra work for developers).</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="suggested-programming-tasks-to-get-started"><a class="link" href="#suggested-programming-tasks-to-get-started">Appendix A: Suggested Programming Tasks to Get Started</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Suggested path for new programmers:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>First, add small local-impact (i.e. the impact of the change does not go beyond the component) enhancements to one component at a time. Some suggestions are given in this section <a href="#improving-each-component">Improving a Component</a>.</p>
</li>
<li>
<p>Next, add a feature that touches multiple components to learn how to implement an end-to-end feature across all components. The section <a href="#creating-a-new-command-code-remark-code">Creating a new command: <code>remark</code></a> explains how to go about adding such a feature.</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="improving-each-component"><a class="link" href="#improving-each-component">A.1. Improving each component</a></h3>
<div class="paragraph">
<p>Each individual exercise in this section is component-based (i.e. you would not need to modify the other components to get it to work).</p>
</div>
<h4 id="code-logic-code-component" class="discrete"><code>Logic</code> component</h4>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Do take a look at the <a href="#logic-component">Design: Logic Component</a> section before attempting to modify the <code>Logic</code> component.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add a shorthand equivalent alias for each of the individual commands. For example, besides typing <code>clear</code>, the user can also type <code>c</code> to remove all persons in the list.</p>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Hints</p>
<div class="ulist">
<ul>
<li>
<p>Just like we store each individual command word constant <code>COMMAND_WORD</code> inside <code>*Command.java</code> (e.g.  <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/logic/commands/FindCommand.java"><code>FindCommand#COMMAND_WORD</code></a>, <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/logic/commands/DeleteCommand.java"><code>DeleteCommand#COMMAND_WORD</code></a>), you need a new constant for aliases as well (e.g. <code>FindCommand#COMMAND_ALIAS</code>).</p>
</li>
<li>
<p><a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/logic/parser/AddressBookParser.java"><code>AddressBookParser</code></a> is responsible for analyzing command words.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Solution</p>
<div class="ulist">
<ul>
<li>
<p>Modify the switch statement in <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/logic/parser/AddressBookParser.java"><code>AddressBookParser#parseCommand(String)</code></a> such that both the proper command word and alias can be used to execute the same intended command.</p>
</li>
<li>
<p>See this <a href="https://github.com/se-edu/addressbook-level4/pull/590/files">PR</a> for the full solution.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</li>
</ol>
</div>
<h4 id="code-model-code-component" class="discrete"><code>Model</code> component</h4>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Do take a look at the <a href="#model-component">Design: Model Component</a> section before attempting to modify the <code>Model</code> component.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add a <code>removeTag(Tag)</code> method. The specified tag will be removed from everyone in the address book.</p>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Hints</p>
<div class="ulist">
<ul>
<li>
<p>The <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/model/Model.java"><code>Model</code></a> API needs to be updated.</p>
</li>
<li>
<p>Find out which of the existing API methods in  <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/model/AddressBook.java"><code>AddressBook</code></a> and <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/model/person/Person.java"><code>Person</code></a> classes can be used to implement the tag removal logic. <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/model/AddressBook.java"><code>AddressBook</code></a> allows you to update a person, and <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/model/person/Person.java"><code>Person</code></a> allows you to update the tags.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Solution</p>
<div class="ulist">
<ul>
<li>
<p>Add the implementation of <code>deleteTag(Tag)</code> method in <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/model/ModelManager.java"><code>ModelManager</code></a>. Loop through each person, and remove the <code>tag</code> from each person.</p>
</li>
<li>
<p>See this <a href="https://github.com/se-edu/addressbook-level4/pull/591/files">PR</a> for the full solution.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</li>
</ol>
</div>
<h4 id="code-ui-code-component" class="discrete"><code>Ui</code> component</h4>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Do take a look at the <a href="#ui-component">Design: UI Component</a> section before attempting to modify the <code>UI</code> component.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Use different colors for different tags inside person cards. For example, <code>friends</code> tags can be all in grey, and <code>colleagues</code> tags can be all in red.</p>
<div class="paragraph">
<p><strong>Before</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/getting-started-ui-tag-before.png" alt="getting started ui tag before" width="300">
</div>
</div>
<div class="paragraph">
<p><strong>After</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/getting-started-ui-tag-after.png" alt="getting started ui tag after" width="300">
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Hints</p>
<div class="ulist">
<ul>
<li>
<p>The tag labels are created inside <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/ui/PersonCard.java"><code>PersonCard#initTags(ReadOnlyPerson)</code></a> (<code>new Label(tag.tagName)</code>). <a href="https://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/Label.html">JavaFX&#8217;s <code>Label</code> class</a> allows you to modify the style of each Label, such as changing its color.</p>
</li>
<li>
<p>Use the .css attribute <code>-fx-background-color</code> to add a color.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Solution</p>
<div class="ulist">
<ul>
<li>
<p>See this <a href="https://github.com/se-edu/addressbook-level4/pull/592/files">PR</a> for the full solution.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</li>
<li>
<p>Modify <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/commons/events/ui/NewResultAvailableEvent.java"><code>NewResultAvailableEvent</code></a> such that <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/ui/ResultDisplay.java"><code>ResultDisplay</code></a> can show a different style on error (currently it shows the same regardless of errors).</p>
<div class="paragraph">
<p><strong>Before</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/getting-started-ui-result-before.png" alt="getting started ui result before" width="200">
</div>
</div>
<div class="paragraph">
<p><strong>After</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/getting-started-ui-result-after.png" alt="getting started ui result after" width="200">
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Hints</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/commons/events/ui/NewResultAvailableEvent.java"><code>NewResultAvailableEvent</code></a> is raised by <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/ui/CommandBox.java"><code>CommandBox</code></a> which also knows whether the result is a success or failure, and is caught by <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/ui/ResultDisplay.java"><code>ResultDisplay</code></a> which is where we want to change the style to.</p>
</li>
<li>
<p>Refer to <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/ui/CommandBox.java"><code>CommandBox</code></a> for an example on how to display an error.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Solution</p>
<div class="ulist">
<ul>
<li>
<p>Modify <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/commons/events/ui/NewResultAvailableEvent.java"><code>NewResultAvailableEvent</code></a> 's constructor so that users of the event can indicate whether an error has occurred.</p>
</li>
<li>
<p>Modify <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/ui/ResultDisplay.java"><code>ResultDisplay#handleNewResultAvailableEvent(event)</code></a> to react to this event appropriately.</p>
</li>
<li>
<p>See this <a href="https://github.com/se-edu/addressbook-level4/pull/593/files">PR</a> for the full solution.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</li>
<li>
<p>Modify the <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/ui/StatusBarFooter.java"><code>StatusBarFooter</code></a> to show the total number of people in the address book.</p>
<div class="paragraph">
<p><strong>Before</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/getting-started-ui-status-before.png" alt="getting started ui status before" width="500">
</div>
</div>
<div class="paragraph">
<p><strong>After</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/getting-started-ui-status-after.png" alt="getting started ui status after" width="500">
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Hints</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/resources/view/StatusBarFooter.fxml"><code>StatusBarFooter.fxml</code></a> will need a new <code>StatusBar</code>. Be sure to set the <code>GridPane.columnIndex</code> properly for each <code>StatusBar</code> to avoid misalignment!</p>
</li>
<li>
<p><a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/ui/StatusBarFooter.java"><code>StatusBarFooter</code></a> needs to initialize the status bar on application start, and to update it accordingly whenever the address book is updated.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Solution</p>
<div class="ulist">
<ul>
<li>
<p>Modify the constructor of <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/ui/StatusBarFooter.java"><code>StatusBarFooter</code></a> to take in the number of persons when the application just started.</p>
</li>
<li>
<p>Use <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/ui/StatusBarFooter.java"><code>StatusBarFooter#handleAddressBookChangedEvent(AddressBookChangedEvent)</code></a> to update the number of persons whenever there are new changes to the addressbook.</p>
</li>
<li>
<p>See this <a href="https://github.com/se-edu/addressbook-level4/pull/596/files">PR</a> for the full solution.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</li>
</ol>
</div>
<h4 id="code-storage-code-component" class="discrete"><code>Storage</code> component</h4>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Do take a look at the <a href="#storage-component">Design: Storage Component</a> section before attempting to modify the <code>Storage</code> component.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add a new method <code>backupAddressBook(ReadOnlyAddressBook)</code>, so that the address book can be saved in a fixed temporary location.</p>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Hint</p>
<div class="ulist">
<ul>
<li>
<p>Add the API method in <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/storage/AddressBookStorage.java"><code>AddressBookStorage</code></a> interface.</p>
</li>
<li>
<p>Implement the logic in <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/storage/StorageManager.java"><code>StorageManager</code></a> class.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Solution</p>
<div class="ulist">
<ul>
<li>
<p>See this <a href="https://github.com/se-edu/addressbook-level4/pull/594/files">PR</a> for the full solution.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="creating-a-new-command-code-remark-code"><a class="link" href="#creating-a-new-command-code-remark-code">A.2. Creating a new command: <code>remark</code></a></h3>
<div class="paragraph">
<p>By creating this command, you will get a chance to learn how to implement a feature end-to-end, touching all major components of the app.</p>
</div>
<div class="sect3">
<h4 id="description"><a class="link" href="#description">A.2.1. Description</a></h4>
<div class="paragraph">
<p>Edits the remark for a person specified in the <code>INDEX</code>.<br>
Format: <code>remark INDEX r/[REMARK]</code></p>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>remark 1 r/Likes to drink coffee.</code><br>
Edits the remark for the first person to <code>Likes to drink coffee.</code></p>
</li>
<li>
<p><code>remark 1 r/</code><br>
Removes the remark for the first person.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="step-by-step-instructions"><a class="link" href="#step-by-step-instructions">A.2.2. Step-by-step Instructions</a></h4>
<div class="sect4">
<h5 id="step-1-logic-teach-the-app-to-accept-remark-which-does-nothing"><a class="link" href="#step-1-logic-teach-the-app-to-accept-remark-which-does-nothing">[Step 1] Logic: Teach the app to accept 'remark' which does nothing</a></h5>
<div class="paragraph">
<p>Let&#8217;s start by teaching the application how to parse a <code>remark</code> command. We will add the logic of <code>remark</code> later.</p>
</div>
<div class="paragraph">
<p><strong>Main:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add a <code>RemarkCommand</code> that extends <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/logic/commands/UndoableCommand.java"><code>UndoableCommand</code></a>. Upon execution, it should just throw an <code>Exception</code>.</p>
</li>
<li>
<p>Modify <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/logic/parser/AddressBookParser.java"><code>AddressBookParser</code></a> to accept a <code>RemarkCommand</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Tests:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add <code>RemarkCommandTest</code> that tests that <code>executeUndoableCommand()</code> throws an Exception.</p>
</li>
<li>
<p>Add new test method to <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/test/java/seedu/address/logic/parser/AddressBookParserTest.java"><code>AddressBookParserTest</code></a>, which tests that typing "remark" returns an instance of <code>RemarkCommand</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="step-2-logic-teach-the-app-to-accept-remark-arguments"><a class="link" href="#step-2-logic-teach-the-app-to-accept-remark-arguments">[Step 2] Logic: Teach the app to accept 'remark' arguments</a></h5>
<div class="paragraph">
<p>Let&#8217;s teach the application to parse arguments that our <code>remark</code> command will accept. E.g. <code>1 r/Likes to drink coffee.</code></p>
</div>
<div class="paragraph">
<p><strong>Main:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Modify <code>RemarkCommand</code> to take in an <code>Index</code> and <code>String</code> and print those two parameters as the error message.</p>
</li>
<li>
<p>Add <code>RemarkCommandParser</code> that knows how to parse two arguments, one index and one with prefix 'r/'.</p>
</li>
<li>
<p>Modify <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/logic/parser/AddressBookParser.java"><code>AddressBookParser</code></a> to use the newly implemented <code>RemarkCommandParser</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Tests:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Modify <code>RemarkCommandTest</code> to test the <code>RemarkCommand#equals()</code> method.</p>
</li>
<li>
<p>Add <code>RemarkCommandParserTest</code> that tests different boundary values
for <code>RemarkCommandParser</code>.</p>
</li>
<li>
<p>Modify <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/test/java/seedu/address/logic/parser/AddressBookParserTest.java"><code>AddressBookParserTest</code></a> to test that the correct command is generated according to the user input.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="step-3-ui-add-a-placeholder-for-remark-in-code-personcard-code"><a class="link" href="#step-3-ui-add-a-placeholder-for-remark-in-code-personcard-code">[Step 3] Ui: Add a placeholder for remark in <code>PersonCard</code></a></h5>
<div class="paragraph">
<p>Let&#8217;s add a placeholder on all our <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/ui/PersonCard.java"><code>PersonCard</code></a> s to display a remark for each person later.</p>
</div>
<div class="paragraph">
<p><strong>Main:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add a <code>Label</code> with any random text inside <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/resources/view/PersonListCard.fxml"><code>PersonListCard.fxml</code></a>.</p>
</li>
<li>
<p>Add FXML annotation in <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/ui/PersonCard.java"><code>PersonCard</code></a> to tie the variable to the actual label.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Tests:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Modify <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/test/java/guitests/guihandles/PersonCardHandle.java"><code>PersonCardHandle</code></a> so that future tests can read the contents of the remark label.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="step-4-model-add-code-remark-code-class"><a class="link" href="#step-4-model-add-code-remark-code-class">[Step 4] Model: Add <code>Remark</code> class</a></h5>
<div class="paragraph">
<p>We have to properly encapsulate the remark in our <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/model/person/ReadOnlyPerson.java"><code>ReadOnlyPerson</code></a> class. Instead of just using a <code>String</code>, let&#8217;s follow the conventional class structure that the codebase already uses by adding a <code>Remark</code> class.</p>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p><strong>Main:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add <code>Remark</code> to model component (you can copy from <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/model/person/Address.java"><code>Address</code></a>, remove the regex and change the names accordingly).</p>
</li>
<li>
<p>Modify <code>RemarkCommand</code> to now take in a <code>Remark</code> instead of a <code>String</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Tests:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add test for <code>Remark</code>, to test the <code>Remark#equals()</code> method.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="step-5-model-modify-code-readonlyperson-code-to-support-a-code-remark-code-field"><a class="link" href="#step-5-model-modify-code-readonlyperson-code-to-support-a-code-remark-code-field">[Step 5] Model: Modify <code>ReadOnlyPerson</code> to support a <code>Remark</code> field</a></h5>
<div class="paragraph">
<p>Now we have the <code>Remark</code> class, we need to actually use it inside <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/model/person/ReadOnlyPerson.java"><code>ReadOnlyPerson</code></a>.</p>
</div>
<div class="paragraph">
<p><strong>Main:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add three methods <code>setRemark(Remark)</code>, <code>getRemark()</code> and <code>remarkProperty()</code>. Be sure to implement these newly created methods in <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/model/person/ReadOnlyPerson.java"><code>Person</code></a>, which implements the <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/model/person/ReadOnlyPerson.java"><code>ReadOnlyPerson</code></a> interface.</p>
</li>
<li>
<p>You may assume that the user will not be able to use the <code>add</code> and <code>edit</code> commands to modify the remarks field (i.e. the person will be created without a remark).</p>
</li>
<li>
<p>Modify <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/model/util/SampleDataUtil.java/"><code>SampleDataUtil</code></a> to add remarks for the sample data (delete your <code>addressBook.xml</code> so that the application will load the sample data when you launch it.)</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="step-6-storage-add-code-remark-code-field-to-code-xmladaptedperson-code-class"><a class="link" href="#step-6-storage-add-code-remark-code-field-to-code-xmladaptedperson-code-class">[Step 6] Storage: Add <code>Remark</code> field to <code>XmlAdaptedPerson</code> class</a></h5>
<div class="paragraph">
<p>We now have <code>Remark</code> s for <code>Person</code> s, but they will be gone when we exit the application. Let&#8217;s modify <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/storage/XmlAdaptedPerson.java"><code>XmlAdaptedPerson</code></a> to include a <code>Remark</code> field so that it will be saved.</p>
</div>
<div class="paragraph">
<p><strong>Main:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add a new Xml field for <code>Remark</code>.</p>
</li>
<li>
<p>Be sure to modify the logic of the constructor and <code>toModelType()</code>, which handles the conversion to/from  <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/model/person/ReadOnlyPerson.java"><code>ReadOnlyPerson</code></a>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Tests:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Fix <code>validAddressBook.xml</code> such that the XML tests will not fail due to a missing <code>&lt;remark&gt;</code> element.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="step-7-ui-connect-code-remark-code-field-to-code-personcard-code"><a class="link" href="#step-7-ui-connect-code-remark-code-field-to-code-personcard-code">[Step 7] Ui: Connect <code>Remark</code> field to <code>PersonCard</code></a></h5>
<div class="paragraph">
<p>Our remark label in <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/ui/PersonCard.java"><code>PersonCard</code></a> is still a placeholder. Let&#8217;s bring it to life by binding it with the actual <code>remark</code> field.</p>
</div>
<div class="paragraph">
<p><strong>Main:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Modify <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/ui/PersonCard.java"><code>PersonCard#bindListeners()</code></a> to add the binding for <code>remark</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Tests:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Modify <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/test/java/seedu/address/ui/testutil/GuiTestAssert.java"><code>GuiTestAssert#assertCardDisplaysPerson(&#8230;&#8203;)</code></a> so that it will compare the remark label.</p>
</li>
<li>
<p>In <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/test/java/seedu/address/ui/PersonCardTest.java"><code>PersonCardTest</code></a>, call <code>personWithTags.setRemark(ALICE.getRemark())</code> to test that changes in the <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/model/person/ReadOnlyPerson.java"><code>Person</code></a> 's remark correctly updates the corresponding <a href="https://github.com/se-edu/addressbook-level4/tree/master/src/main/java/seedu/address/ui/PersonCard.java"><code>PersonCard</code></a>.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="step-8-logic-implement-code-remarkcommand-execute-code-logic"><a class="link" href="#step-8-logic-implement-code-remarkcommand-execute-code-logic">[Step 8] Logic: Implement <code>RemarkCommand#execute()</code> logic</a></h5>
<div class="paragraph">
<p>We now have everything set up&#8230;&#8203; but we still can&#8217;t modify the remarks. Let&#8217;s finish it up by adding in actual logic for our <code>remark</code> command.</p>
</div>
<div class="paragraph">
<p><strong>Main:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Replace the logic in <code>RemarkCommand#execute()</code> (that currently just throws an <code>Exception</code>), with the actual logic to modify the remarks of a person.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Tests:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Update <code>RemarkCommandTest</code> to test that the <code>execute()</code> logic works.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="full-solution"><a class="link" href="#full-solution">A.2.3. Full Solution</a></h4>
<div class="paragraph">
<p>See this <a href="https://github.com/se-edu/addressbook-level4/pull/599">PR</a> for the step-by-step solution.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="user-stories"><a class="link" href="#user-stories">Appendix B: User Stories</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Priorities: High (must have) - <code>* * *</code>, Medium (nice to have) - <code>* *</code>, Low (unlikely to have) - <code>*</code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 30%;">
<col style="width: 30%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Priority</th>
<th class="tableblock halign-left valign-top">As a &#8230;&#8203;</th>
<th class="tableblock halign-left valign-top">I want to &#8230;&#8203;</th>
<th class="tableblock halign-left valign-top">So that I can&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top">Status</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* * *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">import contacts from an existing source</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">use the app with less set-up time</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Available since DoC v1.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* * *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">add more fields to a contact</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">cater to contacts with multiple emails, phone numbers, etc</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* * *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">view frequently contacted contacts on the top of the list</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* * *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">delete multiple people</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">delete groups faster</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* * *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">create a backup of my contacts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">avoid losing them</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* * *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">search for contacts by common tags</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* * *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">favourite a contact</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* * *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">new user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">see usage instructions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">refer to instructions when I forget how to use the App</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AddressBook Level 4: <code>delete</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* * *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">add a new person</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AddressBook Level 4: <code>add</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* * *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">list all my contacts</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AddressBook Level 4: <code>list</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* * *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">update each contact&#8217;s information</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AddressBook Level 4: <code>edit</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* * *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">find a person by name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">locate details of persons without having to go through the entire list</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AddressBook Level 4: <code>find</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* * *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">delete a person</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">remove entries that I no longer need</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AddressBook Level 4: <code>delete</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* * *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">select a person</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Automatically perform a google search on them</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AddressBook Level 4: <code>delete</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* * *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">view history of recent commands</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AddressBook Level 4: <code>history</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* * *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">undo a previous command</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">revert any accidental changes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AddressBook Level 4: <code>undo</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* * *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">redo an undone command</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AddressBook Level 4: <code>redo</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* * *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">delete all contacts</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AddressBook Level 4: <code>clear</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* * *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">exit the program</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AddressBook Level 4: <code>exit</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">call a person</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">email a person</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">retrieve physical location of a person</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">send feedback to the developer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">to improve the app</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">use shorthands of commands</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">use commands faster</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">share my contacts with other users</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">save time on adding</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">customize the appearance of the app</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">swap two contacts in the list</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">view in the desired order</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">view user page of contacts who also use the app</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">view the profile picture of a contact</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">enable auto-correct for slightly mistyped commands</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">store my contacts on an online database</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">access the app using my mobile phone</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">undo my latest command</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">hide <a href="#private-contact-detail">private contact details</a> by default</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">minimize chance of someone else seeing them by accident</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">hide private contact details by default</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">minimize chance of someone else seeing them by accident</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AddressBook Level 4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user with many persons in the address book</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">sort persons by name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">locate a person easily</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>{More to be added}</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="use-cases"><a class="link" href="#use-cases">Appendix C: Use Cases</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>(For all use cases below, the <strong>System</strong> is the <code>AddressBook</code> and the <strong>Actor</strong> is the <code>user</code>, unless specified otherwise)</p>
</div>
<div class="sect2">
<h3 id="use-case-delete-person"><a class="link" href="#use-case-delete-person">C.1. Use case: Delete person</a></h3>
<div class="paragraph">
<p><strong>MSS</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>User requests to list persons.</p>
</li>
<li>
<p>AddressBook shows a list of persons.</p>
</li>
<li>
<p>User requests to delete a specific person in the list.</p>
</li>
<li>
<p>AddressBook deletes the person.</p>
<div class="paragraph">
<p>Use case ends.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Extensions</strong></p>
</div>
<div class="ulist none">
<ul class="none">
<li>
<p>2a. The list is empty.</p>
<div class="paragraph">
<p>Use case ends.</p>
</div>
</li>
<li>
<p>3a. The given index is invalid.</p>
<div class="ulist none">
<ul class="none">
<li>
<p>3a1. AddressBook shows an error message.</p>
<div class="paragraph">
<p>Use case resumes at step 2.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Use case ends.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Extensions</strong></p>
</div>
</div>
<div class="sect2">
<h3 id="use-case-undo-command"><a class="link" href="#use-case-undo-command">C.2. Use case: Undo command</a></h3>
<div class="paragraph">
<p><strong>MSS</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>User requests to undo command.</p>
</li>
<li>
<p>AddressBook shows the latest command and ask for confirmation.</p>
</li>
<li>
<p>User confirms.</p>
</li>
<li>
<p>AddressBook reverts to the state before the command.</p>
<div class="paragraph">
<p>Use case ends.</p>
</div>
</li>
</ol>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p><strong>Extensions</strong></p>
</div>
<div class="ulist none">
<ul class="none">
<li>
<p>1a. The user has not input any commands.</p>
<div class="paragraph">
<p>Use case ends.</p>
</div>
</li>
<li>
<p>2a. The latest command does not involve altering the AddressBook.</p>
<div class="ulist none">
<ul class="none">
<li>
<p>2a1. AddressBook shows an error message.</p>
<div class="paragraph">
<p>Use case ends.</p>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="use-case-swap-persons"><a class="link" href="#use-case-swap-persons">C.3. Use case: Swap Persons</a></h3>
<div class="paragraph">
<p><strong>MSS</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>User requests to list persons.</p>
</li>
<li>
<p>AddressBook shows a list of persons.</p>
</li>
<li>
<p>User request to swap the indexes of two persons in the list.</p>
</li>
<li>
<p>AddressBook swaps the two persons.</p>
<div class="paragraph">
<p>Use case ends.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Extensions</strong></p>
</div>
<div class="ulist none">
<ul class="none">
<li>
<p>2a. The list is empty.</p>
<div class="paragraph">
<p>Use case ends.</p>
</div>
</li>
<li>
<p>3a. The given index(s) is/are invalid.</p>
<div class="ulist none">
<ul class="none">
<li>
<p>3a1. AddressBook shows an error message.</p>
<div class="paragraph">
<p>Use case resumes at step 2.</p>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="use-case-sort-command"><a class="link" href="#use-case-sort-command">C.4. Use case: Sort command</a></h3>
<div class="paragraph">
<p><strong>MSS</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>User requests to sort persons.</p>
</li>
<li>
<p>AddressBook shows a list of sorted persons.</p>
<div class="ulist">
<ul>
<li>
<p>2a. The list will be altered and shows the sorted list.</p>
<div class="paragraph">
<p>Use case ends.</p>
</div>
</li>
<li>
<p>3a. The given index is invalid.</p>
<div class="ulist none">
<ul class="none">
<li>
<p>3a1. AddressBook shows an error message.</p>
<div class="paragraph">
<p>Use case resumes at step 2.</p>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="use-case-delete-multiple-persons"><a class="link" href="#use-case-delete-multiple-persons">C.5. Use case: Delete multiple persons</a></h3>
<div class="paragraph">
<p><strong>MSS</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>User requests to list persons.</p>
</li>
<li>
<p>AddressBook shows a list of persons.</p>
</li>
<li>
<p>User requests to delete multiple person in the list.</p>
</li>
<li>
<p>AddressBook delete the persons.</p>
<div class="paragraph">
<p>Use case ends.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Extensions</strong></p>
</div>
<div class="ulist none">
<ul class="none">
<li>
<p>2a. The list is empty.</p>
<div class="paragraph">
<p>Use case ends.</p>
</div>
</li>
<li>
<p>3a. The given index is invalid.</p>
<div class="ulist none">
<ul class="none">
<li>
<p>3a1. AddressBook shows an error message.</p>
<div class="paragraph">
<p>Use case resumes at step 2.</p>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="use-case-import-existing-contacts-from-google"><a class="link" href="#use-case-import-existing-contacts-from-google">C.6. Use case: Import existing contacts from google</a></h3>
<div class="paragraph">
<p><strong>MSS</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>User requests to import existing contacts.</p>
</li>
<li>
<p>DoC prompts google login for authentication.</p>
</li>
<li>
<p>User enters authentication information.</p>
</li>
<li>
<p>DoC prompts user to grant access to his Google Contacts.</p>
</li>
<li>
<p>User grants access.</p>
</li>
<li>
<p>DoC updates contact list.</p>
<div class="paragraph">
<p>Use case ends.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Extensions</strong></p>
</div>
<div class="ulist none">
<ul class="none">
<li>
<p>3a. User fails to login.</p>
<div class="paragraph">
<p>Use case resumes at step 2.</p>
</div>
</li>
<li>
<p>5a. User refuses to grant access</p>
<div class="paragraph">
<p>Use case ends</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="use-case-add-person"><a class="link" href="#use-case-add-person">C.7. Use case: Add person</a></h3>
<div class="paragraph">
<p><strong>MSS</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>User requests to add person to the address book.</p>
</li>
<li>
<p>AddressBook adds the person.</p>
<div class="paragraph">
<p>Use case ends.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Extensions</strong></p>
</div>
<div class="ulist none">
<ul class="none">
<li>
<p>2a. The given format is invalid.</p>
<div class="ulist none">
<ul class="none">
<li>
<p>2a1. AddressBook shows an error message.</p>
<div class="paragraph">
<p>Use case resumes at step 2.</p>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="use-case-favourite-person"><a class="link" href="#use-case-favourite-person">C.8. Use case: Favourite person</a></h3>
<div class="paragraph">
<p><strong>MSS</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>User requests to list persons.</p>
</li>
<li>
<p>AddressBook shows a list of persons.</p>
</li>
<li>
<p>User requests to favourite a specific person in the list.</p>
</li>
<li>
<p>AddressBook favourites the person.</p>
<div class="paragraph">
<p>Use case ends.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Extensions</strong></p>
</div>
<div class="ulist none">
<ul class="none">
<li>
<p>2a. The list is empty.</p>
<div class="paragraph">
<p>Use case ends.</p>
</div>
</li>
<li>
<p>3a. The given index is invalid.</p>
<div class="ulist none">
<ul class="none">
<li>
<p>3a1. AddressBook shows an error message.</p>
<div class="paragraph">
<p>Use case resumes at step 2.</p>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>{More to be added}</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="non-functional-requirements"><a class="link" href="#non-functional-requirements">Appendix D: Non Functional Requirements</a></h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Should work on any <a href="#mainstream-os">mainstream OS</a> as long as it has Java <code>1.8.0_60</code> or higher installed.</p>
</li>
<li>
<p>Should be able to hold up to 1000 persons without a noticeable sluggishness in performance for typical usage.</p>
</li>
<li>
<p>A user with above average typing speed for regular English text (i.e. not code, not system admin commands) should be able to accomplish most of the tasks faster using commands than using the mouse.</p>
</li>
<li>
<p>The system should respond under a second.</p>
</li>
<li>
<p>The system should be able to recover the data from its backup version.</p>
</li>
<li>
<p>The system should work on both 32-bit and 64-bit environments.</p>
</li>
<li>
<p>The system should provide necessary assistance in usage and operation.</p>
</li>
<li>
<p>The system should be accessible with web-enabled mobile devices.</p>
</li>
<li>
<p>The font colour of the text and the colour of the display panel should be contrasting to improve readability.</p>
</li>
<li>
<p>The user interface should be intuitive enough for users who are not IT-savvy.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>{More to be added}</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="glossary"><a class="link" href="#glossary">Appendix E: Glossary</a></h2>
<div class="sectionbody">
<div id="mainstream-os" class="paragraph">
<p>Mainstream OS</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Windows, Linux, Unix, OS-X</pre>
</div>
</div>
<div id="private-contact-detail" class="paragraph">
<p>Private contact detail</p>
</div>
<div class="literalblock">
<div class="content">
<pre>A contact detail that is not meant to be shared with others</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="product-survey"><a class="link" href="#product-survey">Appendix F: Product Survey</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>DoC</strong></p>
</div>
<div class="paragraph">
<p>Author: Students from the NUS School of Computing</p>
</div>
<div class="paragraph">
<p>Pros:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Allows import and export of Contacts to and from Google Contacts.</p>
</li>
<li>
<p>Allows offline contact information.</p>
</li>
<li>
<p>Allows mass emailing.</p>
</li>
<li>
<p>Allows managing of events.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Cons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Only a desktop app.</p>
</li>
<li>
<p>Needs internet to access certain features.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2017-11-13 03:49:41 +00:00
</div>
</div>
</body>
</html>